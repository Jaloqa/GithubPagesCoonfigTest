import{g as tr,a as rr}from"./vendor-CV63PnOw.js";var rt={exports:{}},We,ht;function nr(){if(ht)return We;ht=1;var n=1e3,r=n*60,i=r*60,u=i*24,h=u*7,g=u*365.25;We=function(b,m){m=m||{};var L=typeof b;if(L==="string"&&b.length>0)return p(b);if(L==="number"&&isFinite(b))return m.long?R(b):l(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))};function p(b){if(b=String(b),!(b.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(m){var L=parseFloat(m[1]),M=(m[2]||"ms").toLowerCase();switch(M){case"years":case"year":case"yrs":case"yr":case"y":return L*g;case"weeks":case"week":case"w":return L*h;case"days":case"day":case"d":return L*u;case"hours":case"hour":case"hrs":case"hr":case"h":return L*i;case"minutes":case"minute":case"mins":case"min":case"m":return L*r;case"seconds":case"second":case"secs":case"sec":case"s":return L*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return L;default:return}}}}function l(b){var m=Math.abs(b);return m>=u?Math.round(b/u)+"d":m>=i?Math.round(b/i)+"h":m>=r?Math.round(b/r)+"m":m>=n?Math.round(b/n)+"s":b+"ms"}function R(b){var m=Math.abs(b);return m>=u?E(b,m,u,"day"):m>=i?E(b,m,i,"hour"):m>=r?E(b,m,r,"minute"):m>=n?E(b,m,n,"second"):b+" ms"}function E(b,m,L,M){var O=m>=L*1.5;return Math.round(b/L)+" "+M+(O?"s":"")}return We}function ir(n){i.debug=i,i.default=i,i.coerce=R,i.disable=p,i.enable=h,i.enabled=l,i.humanize=nr(),i.destroy=E,Object.keys(n).forEach(b=>{i[b]=n[b]}),i.names=[],i.skips=[],i.formatters={};function r(b){let m=0;for(let L=0;L<b.length;L++)m=(m<<5)-m+b.charCodeAt(L),m|=0;return i.colors[Math.abs(m)%i.colors.length]}i.selectColor=r;function i(b){let m,L=null,M,O;function N(...x){if(!N.enabled)return;const d=N,S=Number(new Date),A=S-(m||S);d.diff=A,d.prev=m,d.curr=S,m=S,x[0]=i.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let I=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(P,V)=>{if(P==="%%")return"%";I++;const U=i.formatters[V];if(typeof U=="function"){const k=x[I];P=U.call(d,k),x.splice(I,1),I--}return P}),i.formatArgs.call(d,x),(d.log||i.log).apply(d,x)}return N.namespace=b,N.useColors=i.useColors(),N.color=i.selectColor(b),N.extend=u,N.destroy=i.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>L!==null?L:(M!==i.namespaces&&(M=i.namespaces,O=i.enabled(b)),O),set:x=>{L=x}}),typeof i.init=="function"&&i.init(N),N}function u(b,m){const L=i(this.namespace+(typeof m>"u"?":":m)+b);return L.log=this.log,L}function h(b){i.save(b),i.namespaces=b,i.names=[],i.skips=[];const m=(typeof b=="string"?b:"").trim().replace(" ",",").split(",").filter(Boolean);for(const L of m)L[0]==="-"?i.skips.push(L.slice(1)):i.names.push(L)}function g(b,m){let L=0,M=0,O=-1,N=0;for(;L<b.length;)if(M<m.length&&(m[M]===b[L]||m[M]==="*"))m[M]==="*"?(O=M,N=L,M++):(L++,M++);else if(O!==-1)M=O+1,N++,L=N;else return!1;for(;M<m.length&&m[M]==="*";)M++;return M===m.length}function p(){const b=[...i.names,...i.skips.map(m=>"-"+m)].join(",");return i.enable(""),b}function l(b){for(const m of i.skips)if(g(b,m))return!1;for(const m of i.names)if(g(b,m))return!0;return!1}function R(b){return b instanceof Error?b.stack||b.message:b}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var or=ir;(function(n,r){var i={};r.formatArgs=h,r.save=g,r.load=p,r.useColors=u,r.storage=l(),r.destroy=(()=>{let E=!1;return()=>{E||(E=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function u(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let E;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(E=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(E[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function h(E){if(E[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+E[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const b="color: "+this.color;E.splice(1,0,b,"color: inherit");let m=0,L=0;E[0].replace(/%[a-zA-Z%]/g,M=>{M!=="%%"&&(m++,M==="%c"&&(L=m))}),E.splice(L,0,b)}r.log=console.debug||console.log||(()=>{});function g(E){try{E?r.storage.setItem("debug",E):r.storage.removeItem("debug")}catch{}}function p(){let E;try{E=r.storage.getItem("debug")}catch{}return!E&&typeof process<"u"&&"env"in process&&(E=i.DEBUG),E}function l(){try{return localStorage}catch{}}n.exports=or(r);const{formatters:R}=n.exports;R.j=function(E){try{return JSON.stringify(E)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}}})(rt,rt.exports);var sr=rt.exports,ar=function(){if(typeof globalThis>"u")return null;var r={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return r.RTCPeerConnection?r:null},nt={exports:{}},it={exports:{}},xe={},ke={};ke.byteLength=lr;ke.toByteArray=cr;ke.fromByteArray=gr;var se=[],re=[],fr=typeof Uint8Array<"u"?Uint8Array:Array,$e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Se=0,ur=$e.length;Se<ur;++Se)se[Se]=$e[Se],re[$e.charCodeAt(Se)]=Se;re[45]=62;re[95]=63;function Nt(n){var r=n.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=n.indexOf("=");i===-1&&(i=r);var u=i===r?0:4-i%4;return[i,u]}function lr(n){var r=Nt(n),i=r[0],u=r[1];return(i+u)*3/4-u}function hr(n,r,i){return(r+i)*3/4-i}function cr(n){var r,i=Nt(n),u=i[0],h=i[1],g=new fr(hr(n,u,h)),p=0,l=h>0?u-4:u,R;for(R=0;R<l;R+=4)r=re[n.charCodeAt(R)]<<18|re[n.charCodeAt(R+1)]<<12|re[n.charCodeAt(R+2)]<<6|re[n.charCodeAt(R+3)],g[p++]=r>>16&255,g[p++]=r>>8&255,g[p++]=r&255;return h===2&&(r=re[n.charCodeAt(R)]<<2|re[n.charCodeAt(R+1)]>>4,g[p++]=r&255),h===1&&(r=re[n.charCodeAt(R)]<<10|re[n.charCodeAt(R+1)]<<4|re[n.charCodeAt(R+2)]>>2,g[p++]=r>>8&255,g[p++]=r&255),g}function dr(n){return se[n>>18&63]+se[n>>12&63]+se[n>>6&63]+se[n&63]}function pr(n,r,i){for(var u,h=[],g=r;g<i;g+=3)u=(n[g]<<16&16711680)+(n[g+1]<<8&65280)+(n[g+2]&255),h.push(dr(u));return h.join("")}function gr(n){for(var r,i=n.length,u=i%3,h=[],g=16383,p=0,l=i-u;p<l;p+=g)h.push(pr(n,p,p+g>l?l:p+g));return u===1?(r=n[i-1],h.push(se[r>>2]+se[r<<4&63]+"==")):u===2&&(r=(n[i-2]<<8)+n[i-1],h.push(se[r>>10]+se[r>>4&63]+se[r<<2&63]+"=")),h.join("")}var ft={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ft.read=function(n,r,i,u,h){var g,p,l=h*8-u-1,R=(1<<l)-1,E=R>>1,b=-7,m=i?h-1:0,L=i?-1:1,M=n[r+m];for(m+=L,g=M&(1<<-b)-1,M>>=-b,b+=l;b>0;g=g*256+n[r+m],m+=L,b-=8);for(p=g&(1<<-b)-1,g>>=-b,b+=u;b>0;p=p*256+n[r+m],m+=L,b-=8);if(g===0)g=1-E;else{if(g===R)return p?NaN:(M?-1:1)*(1/0);p=p+Math.pow(2,u),g=g-E}return(M?-1:1)*p*Math.pow(2,g-u)};ft.write=function(n,r,i,u,h,g){var p,l,R,E=g*8-h-1,b=(1<<E)-1,m=b>>1,L=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=u?0:g-1,O=u?1:-1,N=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,p=b):(p=Math.floor(Math.log(r)/Math.LN2),r*(R=Math.pow(2,-p))<1&&(p--,R*=2),p+m>=1?r+=L/R:r+=L*Math.pow(2,1-m),r*R>=2&&(p++,R/=2),p+m>=b?(l=0,p=b):p+m>=1?(l=(r*R-1)*Math.pow(2,h),p=p+m):(l=r*Math.pow(2,m-1)*Math.pow(2,h),p=0));h>=8;n[i+M]=l&255,M+=O,l/=256,h-=8);for(p=p<<h|l,E+=h;E>0;n[i+M]=p&255,M+=O,p/=256,E-=8);n[i+M-O]|=N*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const r=ke,i=ft,u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=S,n.INSPECT_MAX_BYTES=50;const h=2147483647;n.kMaxLength=h,l.TYPED_ARRAY_SUPPORT=g(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{const o=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(o,e),o.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function p(o){if(o>h)throw new RangeError('The value "'+o+'" is invalid for option "size"');const e=new Uint8Array(o);return Object.setPrototypeOf(e,l.prototype),e}function l(o,e,t){if(typeof o=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(o)}return R(o,e,t)}l.poolSize=8192;function R(o,e,t){if(typeof o=="string")return L(o,e);if(ArrayBuffer.isView(o))return O(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(ee(o,ArrayBuffer)||o&&ee(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(o,SharedArrayBuffer)||o&&ee(o.buffer,SharedArrayBuffer)))return N(o,e,t);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const s=o.valueOf&&o.valueOf();if(s!=null&&s!==o)return l.from(s,e,t);const c=x(o);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return l.from(o[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}l.from=function(o,e,t){return R(o,e,t)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function E(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function b(o,e,t){return E(o),o<=0?p(o):e!==void 0?typeof t=="string"?p(o).fill(e,t):p(o).fill(e):p(o)}l.alloc=function(o,e,t){return b(o,e,t)};function m(o){return E(o),p(o<0?0:d(o)|0)}l.allocUnsafe=function(o){return m(o)},l.allocUnsafeSlow=function(o){return m(o)};function L(o,e){if((typeof e!="string"||e==="")&&(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=A(o,e)|0;let s=p(t);const c=s.write(o,e);return c!==t&&(s=s.slice(0,c)),s}function M(o){const e=o.length<0?0:d(o.length)|0,t=p(e);for(let s=0;s<e;s+=1)t[s]=o[s]&255;return t}function O(o){if(ee(o,Uint8Array)){const e=new Uint8Array(o);return N(e.buffer,e.byteOffset,e.byteLength)}return M(o)}function N(o,e,t){if(e<0||o.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let s;return e===void 0&&t===void 0?s=new Uint8Array(o):t===void 0?s=new Uint8Array(o,e):s=new Uint8Array(o,e,t),Object.setPrototypeOf(s,l.prototype),s}function x(o){if(l.isBuffer(o)){const e=d(o.length)|0,t=p(e);return t.length===0||o.copy(t,0,0,e),t}if(o.length!==void 0)return typeof o.length!="number"||pe(o.length)?p(0):M(o);if(o.type==="Buffer"&&Array.isArray(o.data))return M(o.data)}function d(o){if(o>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return o|0}function S(o){return+o!=o&&(o=0),l.alloc(+o)}l.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==l.prototype},l.compare=function(e,t){if(ee(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,c=t.length;for(let _=0,v=Math.min(s,c);_<v;++_)if(e[_]!==t[_]){s=e[_],c=t[_];break}return s<c?-1:c<s?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return l.alloc(0);let s;if(t===void 0)for(t=0,s=0;s<e.length;++s)t+=e[s].length;const c=l.allocUnsafe(t);let _=0;for(s=0;s<e.length;++s){let v=e[s];if(ee(v,Uint8Array))_+v.length>c.length?(l.isBuffer(v)||(v=l.from(v)),v.copy(c,_)):Uint8Array.prototype.set.call(c,v,_);else if(l.isBuffer(v))v.copy(c,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=v.length}return c};function A(o,e){if(l.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||ee(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const t=o.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&t===0)return 0;let c=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return H(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Fe(o).length;default:if(c)return s?-1:H(o).length;e=(""+e).toLowerCase(),c=!0}}l.byteLength=A;function I(o,e,t){let s=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(o||(o="utf8");;)switch(o){case"hex":return le(this,e,t);case"utf8":case"utf-8":return we(this,e,t);case"ascii":return ae(this,e,t);case"latin1":case"binary":return be(this,e,t);case"base64":return ue(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,e,t);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),s=!0}}l.prototype._isBuffer=!0;function B(o,e,t){const s=o[e];o[e]=o[t],o[t]=s}l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)B(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)B(this,t,t+3),B(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)B(this,t,t+7),B(this,t+1,t+6),B(this,t+2,t+5),B(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?we(this,0,e):I.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:l.compare(this,e)===0},l.prototype.inspect=function(){let e="";const t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},u&&(l.prototype[u]=l.prototype.inspect),l.prototype.compare=function(e,t,s,c,_){if(ee(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),s===void 0&&(s=e?e.length:0),c===void 0&&(c=0),_===void 0&&(_=this.length),t<0||s>e.length||c<0||_>this.length)throw new RangeError("out of range index");if(c>=_&&t>=s)return 0;if(c>=_)return-1;if(t>=s)return 1;if(t>>>=0,s>>>=0,c>>>=0,_>>>=0,this===e)return 0;let v=_-c,W=s-t;const z=Math.min(v,W),X=this.slice(c,_),Z=e.slice(t,s);for(let G=0;G<z;++G)if(X[G]!==Z[G]){v=X[G],W=Z[G];break}return v<W?-1:W<v?1:0};function P(o,e,t,s,c){if(o.length===0)return-1;if(typeof t=="string"?(s=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,pe(t)&&(t=c?0:o.length-1),t<0&&(t=o.length+t),t>=o.length){if(c)return-1;t=o.length-1}else if(t<0)if(c)t=0;else return-1;if(typeof e=="string"&&(e=l.from(e,s)),l.isBuffer(e))return e.length===0?-1:V(o,e,t,s,c);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(o,e,t):Uint8Array.prototype.lastIndexOf.call(o,e,t):V(o,[e],t,s,c);throw new TypeError("val must be string, number or Buffer")}function V(o,e,t,s,c){let _=1,v=o.length,W=e.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(o.length<2||e.length<2)return-1;_=2,v/=2,W/=2,t/=2}function z(Z,G){return _===1?Z[G]:Z.readUInt16BE(G*_)}let X;if(c){let Z=-1;for(X=t;X<v;X++)if(z(o,X)===z(e,Z===-1?0:X-Z)){if(Z===-1&&(Z=X),X-Z+1===W)return Z*_}else Z!==-1&&(X-=X-Z),Z=-1}else for(t+W>v&&(t=v-W),X=t;X>=0;X--){let Z=!0;for(let G=0;G<W;G++)if(z(o,X+G)!==z(e,G)){Z=!1;break}if(Z)return X}return-1}l.prototype.includes=function(e,t,s){return this.indexOf(e,t,s)!==-1},l.prototype.indexOf=function(e,t,s){return P(this,e,t,s,!0)},l.prototype.lastIndexOf=function(e,t,s){return P(this,e,t,s,!1)};function U(o,e,t,s){t=Number(t)||0;const c=o.length-t;s?(s=Number(s),s>c&&(s=c)):s=c;const _=e.length;s>_/2&&(s=_/2);let v;for(v=0;v<s;++v){const W=parseInt(e.substr(v*2,2),16);if(pe(W))return v;o[t+v]=W}return v}function k(o,e,t,s){return Ce(H(e,o.length-t),o,t,s)}function ie(o,e,t,s){return Ce(he(e),o,t,s)}function ce(o,e,t,s){return Ce(Fe(e),o,t,s)}function Ie(o,e,t,s){return Ce(Re(e,o.length-t),o,t,s)}l.prototype.write=function(e,t,s,c){if(t===void 0)c="utf8",s=this.length,t=0;else if(s===void 0&&typeof t=="string")c=t,s=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(s)?(s=s>>>0,c===void 0&&(c="utf8")):(c=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _=this.length-t;if((s===void 0||s>_)&&(s=_),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let v=!1;for(;;)switch(c){case"hex":return U(this,e,t,s);case"utf8":case"utf-8":return k(this,e,t,s);case"ascii":case"latin1":case"binary":return ie(this,e,t,s);case"base64":return ce(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,e,t,s);default:if(v)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),v=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(o,e,t){return e===0&&t===o.length?r.fromByteArray(o):r.fromByteArray(o.slice(e,t))}function we(o,e,t){t=Math.min(o.length,t);const s=[];let c=e;for(;c<t;){const _=o[c];let v=null,W=_>239?4:_>223?3:_>191?2:1;if(c+W<=t){let z,X,Z,G;switch(W){case 1:_<128&&(v=_);break;case 2:z=o[c+1],(z&192)===128&&(G=(_&31)<<6|z&63,G>127&&(v=G));break;case 3:z=o[c+1],X=o[c+2],(z&192)===128&&(X&192)===128&&(G=(_&15)<<12|(z&63)<<6|X&63,G>2047&&(G<55296||G>57343)&&(v=G));break;case 4:z=o[c+1],X=o[c+2],Z=o[c+3],(z&192)===128&&(X&192)===128&&(Z&192)===128&&(G=(_&15)<<18|(z&63)<<12|(X&63)<<6|Z&63,G>65535&&G<1114112&&(v=G))}}v===null?(v=65533,W=1):v>65535&&(v-=65536,s.push(v>>>10&1023|55296),v=56320|v&1023),s.push(v),c+=W}return Be(s)}const de=4096;function Be(o){const e=o.length;if(e<=de)return String.fromCharCode.apply(String,o);let t="",s=0;for(;s<e;)t+=String.fromCharCode.apply(String,o.slice(s,s+=de));return t}function ae(o,e,t){let s="";t=Math.min(o.length,t);for(let c=e;c<t;++c)s+=String.fromCharCode(o[c]&127);return s}function be(o,e,t){let s="";t=Math.min(o.length,t);for(let c=e;c<t;++c)s+=String.fromCharCode(o[c]);return s}function le(o,e,t){const s=o.length;(!e||e<0)&&(e=0),(!t||t<0||t>s)&&(t=s);let c="";for(let _=e;_<t;++_)c+=Ne[o[_]];return c}function Ee(o,e,t){const s=o.slice(e,t);let c="";for(let _=0;_<s.length-1;_+=2)c+=String.fromCharCode(s[_]+s[_+1]*256);return c}l.prototype.slice=function(e,t){const s=this.length;e=~~e,t=t===void 0?s:~~t,e<0?(e+=s,e<0&&(e=0)):e>s&&(e=s),t<0?(t+=s,t<0&&(t=0)):t>s&&(t=s),t<e&&(t=e);const c=this.subarray(e,t);return Object.setPrototypeOf(c,l.prototype),c};function J(o,e,t){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+e>t)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||J(e,t,this.length);let c=this[e],_=1,v=0;for(;++v<t&&(_*=256);)c+=this[e+v]*_;return c},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||J(e,t,this.length);let c=this[e+--t],_=1;for(;t>0&&(_*=256);)c+=this[e+--t]*_;return c},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e=e>>>0,t||J(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||J(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||J(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||J(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||J(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=te(function(e){e=e>>>0,C(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&F(e,this.length-8);const c=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,_=this[++e]+this[++e]*2**8+this[++e]*2**16+s*2**24;return BigInt(c)+(BigInt(_)<<BigInt(32))}),l.prototype.readBigUInt64BE=te(function(e){e=e>>>0,C(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&F(e,this.length-8);const c=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],_=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+s;return(BigInt(c)<<BigInt(32))+BigInt(_)}),l.prototype.readIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||J(e,t,this.length);let c=this[e],_=1,v=0;for(;++v<t&&(_*=256);)c+=this[e+v]*_;return _*=128,c>=_&&(c-=Math.pow(2,8*t)),c},l.prototype.readIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||J(e,t,this.length);let c=t,_=1,v=this[e+--c];for(;c>0&&(_*=256);)v+=this[e+--c]*_;return _*=128,v>=_&&(v-=Math.pow(2,8*t)),v},l.prototype.readInt8=function(e,t){return e=e>>>0,t||J(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},l.prototype.readInt16LE=function(e,t){e=e>>>0,t||J(e,2,this.length);const s=this[e]|this[e+1]<<8;return s&32768?s|4294901760:s},l.prototype.readInt16BE=function(e,t){e=e>>>0,t||J(e,2,this.length);const s=this[e+1]|this[e]<<8;return s&32768?s|4294901760:s},l.prototype.readInt32LE=function(e,t){return e=e>>>0,t||J(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e=e>>>0,t||J(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=te(function(e){e=e>>>0,C(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&F(e,this.length-8);const c=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(s<<24);return(BigInt(c)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),l.prototype.readBigInt64BE=te(function(e){e=e>>>0,C(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&F(e,this.length-8);const c=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(c)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+s)}),l.prototype.readFloatLE=function(e,t){return e=e>>>0,t||J(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e=e>>>0,t||J(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||J(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||J(e,8,this.length),i.read(this,e,!1,52,8)};function Q(o,e,t,s,c,_){if(!l.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>c||e<_)throw new RangeError('"value" argument is out of bounds');if(t+s>o.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,s,c){if(e=+e,t=t>>>0,s=s>>>0,!c){const W=Math.pow(2,8*s)-1;Q(this,e,t,s,W,0)}let _=1,v=0;for(this[t]=e&255;++v<s&&(_*=256);)this[t+v]=e/_&255;return t+s},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,s,c){if(e=+e,t=t>>>0,s=s>>>0,!c){const W=Math.pow(2,8*s)-1;Q(this,e,t,s,W,0)}let _=s-1,v=1;for(this[t+_]=e&255;--_>=0&&(v*=256);)this[t+_]=e/v&255;return t+s},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,1,255,0),this[t]=e&255,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function oe(o,e,t,s,c){f(e,s,c,o,t,7);let _=Number(e&BigInt(4294967295));o[t++]=_,_=_>>8,o[t++]=_,_=_>>8,o[t++]=_,_=_>>8,o[t++]=_;let v=Number(e>>BigInt(32)&BigInt(4294967295));return o[t++]=v,v=v>>8,o[t++]=v,v=v>>8,o[t++]=v,v=v>>8,o[t++]=v,t}function me(o,e,t,s,c){f(e,s,c,o,t,7);let _=Number(e&BigInt(4294967295));o[t+7]=_,_=_>>8,o[t+6]=_,_=_>>8,o[t+5]=_,_=_>>8,o[t+4]=_;let v=Number(e>>BigInt(32)&BigInt(4294967295));return o[t+3]=v,v=v>>8,o[t+2]=v,v=v>>8,o[t+1]=v,v=v>>8,o[t]=v,t+8}l.prototype.writeBigUInt64LE=te(function(e,t=0){return oe(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=te(function(e,t=0){return me(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,s,c){if(e=+e,t=t>>>0,!c){const z=Math.pow(2,8*s-1);Q(this,e,t,s,z-1,-z)}let _=0,v=1,W=0;for(this[t]=e&255;++_<s&&(v*=256);)e<0&&W===0&&this[t+_-1]!==0&&(W=1),this[t+_]=(e/v>>0)-W&255;return t+s},l.prototype.writeIntBE=function(e,t,s,c){if(e=+e,t=t>>>0,!c){const z=Math.pow(2,8*s-1);Q(this,e,t,s,z-1,-z)}let _=s-1,v=1,W=0;for(this[t+_]=e&255;--_>=0&&(v*=256);)e<0&&W===0&&this[t+_+1]!==0&&(W=1),this[t+_]=(e/v>>0)-W&255;return t+s},l.prototype.writeInt8=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},l.prototype.writeInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},l.prototype.writeInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||Q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},l.prototype.writeBigInt64LE=te(function(e,t=0){return oe(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=te(function(e,t=0){return me(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ve(o,e,t,s,c,_){if(t+s>o.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function w(o,e,t,s,c){return e=+e,t=t>>>0,c||ve(o,e,t,4),i.write(o,e,t,s,23,4),t+4}l.prototype.writeFloatLE=function(e,t,s){return w(this,e,t,!0,s)},l.prototype.writeFloatBE=function(e,t,s){return w(this,e,t,!1,s)};function y(o,e,t,s,c){return e=+e,t=t>>>0,c||ve(o,e,t,8),i.write(o,e,t,s,52,8),t+8}l.prototype.writeDoubleLE=function(e,t,s){return y(this,e,t,!0,s)},l.prototype.writeDoubleBE=function(e,t,s){return y(this,e,t,!1,s)},l.prototype.copy=function(e,t,s,c){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),!c&&c!==0&&(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<s&&(c=s),c===s||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-s&&(c=e.length-t+s);const _=c-s;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,s,c):Uint8Array.prototype.set.call(e,this.subarray(s,c),t),_},l.prototype.fill=function(e,t,s,c){if(typeof e=="string"){if(typeof t=="string"?(c=t,t=0,s=this.length):typeof s=="string"&&(c=s,s=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!l.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(e.length===1){const v=e.charCodeAt(0);(c==="utf8"&&v<128||c==="latin1")&&(e=v)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;t=t>>>0,s=s===void 0?this.length:s>>>0,e||(e=0);let _;if(typeof e=="number")for(_=t;_<s;++_)this[_]=e;else{const v=l.isBuffer(e)?e:l.from(e,c),W=v.length;if(W===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(_=0;_<s-t;++_)this[_+t]=v[_%W]}return this};const T={};function D(o,e,t){T[o]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}D("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(o,e){return`The "${o}" argument must be of type number. Received type ${typeof e}`},TypeError),D("ERR_OUT_OF_RANGE",function(o,e,t){let s=`The value of "${o}" is out of range.`,c=t;return Number.isInteger(t)&&Math.abs(t)>2**32?c=j(String(t)):typeof t=="bigint"&&(c=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(c=j(c)),c+="n"),s+=` It must be ${e}. Received ${c}`,s},RangeError);function j(o){let e="",t=o.length;const s=o[0]==="-"?1:0;for(;t>=s+4;t-=3)e=`_${o.slice(t-3,t)}${e}`;return`${o.slice(0,t)}${e}`}function a(o,e,t){C(e,"offset"),(o[e]===void 0||o[e+t]===void 0)&&F(e,o.length-(t+1))}function f(o,e,t,s,c,_){if(o>t||o<e){const v=typeof e=="bigint"?"n":"";let W;throw e===0||e===BigInt(0)?W=`>= 0${v} and < 2${v} ** ${(_+1)*8}${v}`:W=`>= -(2${v} ** ${(_+1)*8-1}${v}) and < 2 ** ${(_+1)*8-1}${v}`,new T.ERR_OUT_OF_RANGE("value",W,o)}a(s,c,_)}function C(o,e){if(typeof o!="number")throw new T.ERR_INVALID_ARG_TYPE(e,"number",o)}function F(o,e,t){throw Math.floor(o)!==o?(C(o,t),new T.ERR_OUT_OF_RANGE("offset","an integer",o)):e<0?new T.ERR_BUFFER_OUT_OF_BOUNDS:new T.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,o)}const K=/[^+/0-9A-Za-z-_]/g;function q(o){if(o=o.split("=")[0],o=o.trim().replace(K,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function H(o,e){e=e||1/0;let t;const s=o.length;let c=null;const _=[];for(let v=0;v<s;++v){if(t=o.charCodeAt(v),t>55295&&t<57344){if(!c){if(t>56319){(e-=3)>-1&&_.push(239,191,189);continue}else if(v+1===s){(e-=3)>-1&&_.push(239,191,189);continue}c=t;continue}if(t<56320){(e-=3)>-1&&_.push(239,191,189),c=t;continue}t=(c-55296<<10|t-56320)+65536}else c&&(e-=3)>-1&&_.push(239,191,189);if(c=null,t<128){if((e-=1)<0)break;_.push(t)}else if(t<2048){if((e-=2)<0)break;_.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;_.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;_.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return _}function he(o){const e=[];for(let t=0;t<o.length;++t)e.push(o.charCodeAt(t)&255);return e}function Re(o,e){let t,s,c;const _=[];for(let v=0;v<o.length&&!((e-=2)<0);++v)t=o.charCodeAt(v),s=t>>8,c=t%256,_.push(c),_.push(s);return _}function Fe(o){return r.toByteArray(q(o))}function Ce(o,e,t,s){let c;for(c=0;c<s&&!(c+t>=e.length||c>=o.length);++c)e[c+t]=o[c];return c}function ee(o,e){return o instanceof e||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===e.name}function pe(o){return o!==o}const Ne=function(){const o="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const s=t*16;for(let c=0;c<16;++c)e[s+c]=o[t]+o[c]}return e}();function te(o){return typeof BigInt>"u"?ge:o}function ge(){throw new Error("BigInt not supported")}})(xe);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,r){var i=xe,u=i.Buffer;function h(p,l){for(var R in p)l[R]=p[R]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?n.exports=i:(h(i,r),r.Buffer=g);function g(p,l,R){return u(p,l,R)}g.prototype=Object.create(u.prototype),h(u,g),g.from=function(p,l,R){if(typeof p=="number")throw new TypeError("Argument must not be a number");return u(p,l,R)},g.alloc=function(p,l,R){if(typeof p!="number")throw new TypeError("Argument must be a number");var E=u(p);return l!==void 0?typeof R=="string"?E.fill(l,R):E.fill(l):E.fill(0),E},g.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return u(p)},g.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(p)}})(it,it.exports);var Lt=it.exports,He=65536,yr=4294967295;function _r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var wr=Lt.Buffer,Pe=window.crypto||window.msCrypto;Pe&&Pe.getRandomValues?nt.exports=br:nt.exports=_r;function br(n,r){if(n>yr)throw new RangeError("requested too many random bytes");var i=wr.allocUnsafe(n);if(n>0)if(n>He)for(var u=0;u<n;u+=He)Pe.getRandomValues(i.slice(u,u+He));else Pe.getRandomValues(i);return typeof r=="function"?process.nextTick(function(){r(null,i)}):i}var Er=nt.exports,ot={exports:{}},ut={exports:{}},Te=typeof Reflect=="object"?Reflect:null,ct=Te&&typeof Te.apply=="function"?Te.apply:function(r,i,u){return Function.prototype.apply.call(r,i,u)},Me;Te&&typeof Te.ownKeys=="function"?Me=Te.ownKeys:Object.getOwnPropertySymbols?Me=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Me=function(r){return Object.getOwnPropertyNames(r)};function mr(n){console&&console.warn&&console.warn(n)}var Ot=Number.isNaN||function(r){return r!==r};function Y(){Y.init.call(this)}ut.exports=Y;ut.exports.once=Sr;Y.EventEmitter=Y;Y.prototype._events=void 0;Y.prototype._eventsCount=0;Y.prototype._maxListeners=void 0;var dt=10;function Ue(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(Y,"defaultMaxListeners",{enumerable:!0,get:function(){return dt},set:function(n){if(typeof n!="number"||n<0||Ot(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");dt=n}});Y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Y.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Ot(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Mt(n){return n._maxListeners===void 0?Y.defaultMaxListeners:n._maxListeners}Y.prototype.getMaxListeners=function(){return Mt(this)};Y.prototype.emit=function(r){for(var i=[],u=1;u<arguments.length;u++)i.push(arguments[u]);var h=r==="error",g=this._events;if(g!==void 0)h=h&&g.error===void 0;else if(!h)return!1;if(h){var p;if(i.length>0&&(p=i[0]),p instanceof Error)throw p;var l=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw l.context=p,l}var R=g[r];if(R===void 0)return!1;if(typeof R=="function")ct(R,this,i);else for(var E=R.length,b=jt(R,E),u=0;u<E;++u)ct(b[u],this,i);return!0};function Dt(n,r,i,u){var h,g,p;if(Ue(i),g=n._events,g===void 0?(g=n._events=Object.create(null),n._eventsCount=0):(g.newListener!==void 0&&(n.emit("newListener",r,i.listener?i.listener:i),g=n._events),p=g[r]),p===void 0)p=g[r]=i,++n._eventsCount;else if(typeof p=="function"?p=g[r]=u?[i,p]:[p,i]:u?p.unshift(i):p.push(i),h=Mt(n),h>0&&p.length>h&&!p.warned){p.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=r,l.count=p.length,mr(l)}return n}Y.prototype.addListener=function(r,i){return Dt(this,r,i,!1)};Y.prototype.on=Y.prototype.addListener;Y.prototype.prependListener=function(r,i){return Dt(this,r,i,!0)};function vr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Pt(n,r,i){var u={fired:!1,wrapFn:void 0,target:n,type:r,listener:i},h=vr.bind(u);return h.listener=i,u.wrapFn=h,h}Y.prototype.once=function(r,i){return Ue(i),this.on(r,Pt(this,r,i)),this};Y.prototype.prependOnceListener=function(r,i){return Ue(i),this.prependListener(r,Pt(this,r,i)),this};Y.prototype.removeListener=function(r,i){var u,h,g,p,l;if(Ue(i),h=this._events,h===void 0)return this;if(u=h[r],u===void 0)return this;if(u===i||u.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete h[r],h.removeListener&&this.emit("removeListener",r,u.listener||i));else if(typeof u!="function"){for(g=-1,p=u.length-1;p>=0;p--)if(u[p]===i||u[p].listener===i){l=u[p].listener,g=p;break}if(g<0)return this;g===0?u.shift():Rr(u,g),u.length===1&&(h[r]=u[0]),h.removeListener!==void 0&&this.emit("removeListener",r,l||i)}return this};Y.prototype.off=Y.prototype.removeListener;Y.prototype.removeAllListeners=function(r){var i,u,h;if(u=this._events,u===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete u[r]),this;if(arguments.length===0){var g=Object.keys(u),p;for(h=0;h<g.length;++h)p=g[h],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=u[r],typeof i=="function")this.removeListener(r,i);else if(i!==void 0)for(h=i.length-1;h>=0;h--)this.removeListener(r,i[h]);return this};function kt(n,r,i){var u=n._events;if(u===void 0)return[];var h=u[r];return h===void 0?[]:typeof h=="function"?i?[h.listener||h]:[h]:i?Cr(h):jt(h,h.length)}Y.prototype.listeners=function(r){return kt(this,r,!0)};Y.prototype.rawListeners=function(r){return kt(this,r,!1)};Y.listenerCount=function(n,r){return typeof n.listenerCount=="function"?n.listenerCount(r):Ut.call(n,r)};Y.prototype.listenerCount=Ut;function Ut(n){var r=this._events;if(r!==void 0){var i=r[n];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Y.prototype.eventNames=function(){return this._eventsCount>0?Me(this._events):[]};function jt(n,r){for(var i=new Array(r),u=0;u<r;++u)i[u]=n[u];return i}function Rr(n,r){for(;r+1<n.length;r++)n[r]=n[r+1];n.pop()}function Cr(n){for(var r=new Array(n.length),i=0;i<r.length;++i)r[i]=n[i].listener||n[i];return r}function Sr(n,r){return new Promise(function(i,u){function h(p){n.removeListener(r,g),u(p)}function g(){typeof n.removeListener=="function"&&n.removeListener("error",h),i([].slice.call(arguments))}qt(n,r,g,{once:!0}),r!=="error"&&Tr(n,h,{once:!0})})}function Tr(n,r,i){typeof n.on=="function"&&qt(n,"error",r,i)}function qt(n,r,i,u){if(typeof n.on=="function")u.once?n.once(r,i):n.on(r,i);else if(typeof n.addEventListener=="function")n.addEventListener(r,function h(g){u.once&&n.removeEventListener(r,h),i(g)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Wt=ut.exports,$t=Wt.EventEmitter;const Ar={},xr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Ht=tr(xr);var Ye,pt;function Ir(){if(pt)return Ye;pt=1;function n(O,N){var x=Object.keys(O);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(O);N&&(d=d.filter(function(S){return Object.getOwnPropertyDescriptor(O,S).enumerable})),x.push.apply(x,d)}return x}function r(O){for(var N=1;N<arguments.length;N++){var x=arguments[N]!=null?arguments[N]:{};N%2?n(Object(x),!0).forEach(function(d){i(O,d,x[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):n(Object(x)).forEach(function(d){Object.defineProperty(O,d,Object.getOwnPropertyDescriptor(x,d))})}return O}function i(O,N,x){return N=p(N),N in O?Object.defineProperty(O,N,{value:x,enumerable:!0,configurable:!0,writable:!0}):O[N]=x,O}function u(O,N){if(!(O instanceof N))throw new TypeError("Cannot call a class as a function")}function h(O,N){for(var x=0;x<N.length;x++){var d=N[x];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(O,p(d.key),d)}}function g(O,N,x){return N&&h(O.prototype,N),Object.defineProperty(O,"prototype",{writable:!1}),O}function p(O){var N=l(O,"string");return typeof N=="symbol"?N:String(N)}function l(O,N){if(typeof O!="object"||O===null)return O;var x=O[Symbol.toPrimitive];if(x!==void 0){var d=x.call(O,N);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}var R=xe,E=R.Buffer,b=Ht,m=b.inspect,L=m&&m.custom||"inspect";function M(O,N,x){E.prototype.copy.call(O,N,x)}return Ye=function(){function O(){u(this,O),this.head=null,this.tail=null,this.length=0}return g(O,[{key:"push",value:function(x){var d={data:x,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(x){var d={data:x,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(this.length!==0){var x=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,x}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(x){if(this.length===0)return"";for(var d=this.head,S=""+d.data;d=d.next;)S+=x+d.data;return S}},{key:"concat",value:function(x){if(this.length===0)return E.alloc(0);for(var d=E.allocUnsafe(x>>>0),S=this.head,A=0;S;)M(S.data,d,A),A+=S.data.length,S=S.next;return d}},{key:"consume",value:function(x,d){var S;return x<this.head.data.length?(S=this.head.data.slice(0,x),this.head.data=this.head.data.slice(x)):x===this.head.data.length?S=this.shift():S=d?this._getString(x):this._getBuffer(x),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(x){var d=this.head,S=1,A=d.data;for(x-=A.length;d=d.next;){var I=d.data,B=x>I.length?I.length:x;if(B===I.length?A+=I:A+=I.slice(0,x),x-=B,x===0){B===I.length?(++S,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=I.slice(B));break}++S}return this.length-=S,A}},{key:"_getBuffer",value:function(x){var d=E.allocUnsafe(x),S=this.head,A=1;for(S.data.copy(d),x-=S.data.length;S=S.next;){var I=S.data,B=x>I.length?I.length:x;if(I.copy(d,d.length-x,0,B),x-=B,x===0){B===I.length?(++A,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=I.slice(B));break}++A}return this.length-=A,d}},{key:L,value:function(x,d){return m(this,r(r({},d),{},{depth:0,customInspect:!1}))}}]),O}(),Ye}function Br(n,r){var i=this,u=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return u||h?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(st,this,n)):process.nextTick(st,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(g){!r&&g?i._writableState?i._writableState.errorEmitted?process.nextTick(De,i):(i._writableState.errorEmitted=!0,process.nextTick(gt,i,g)):process.nextTick(gt,i,g):r?(process.nextTick(De,i),r(g)):process.nextTick(De,i)}),this)}function gt(n,r){st(n,r),De(n)}function De(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function Fr(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function st(n,r){n.emit("error",r)}function Nr(n,r){var i=n._readableState,u=n._writableState;i&&i.autoDestroy||u&&u.autoDestroy?n.destroy(r):n.emit("error",r)}var Yt={destroy:Br,undestroy:Fr,errorOrDestroy:Nr},_e={};function Lr(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var Gt={};function ne(n,r,i){i||(i=Error);function u(g,p,l){return typeof r=="string"?r:r(g,p,l)}var h=function(g){Lr(p,g);function p(l,R,E){return g.call(this,u(l,R,E))||this}return p}(i);h.prototype.name=i.name,h.prototype.code=n,Gt[n]=h}function yt(n,r){if(Array.isArray(n)){var i=n.length;return n=n.map(function(u){return String(u)}),i>2?"one of ".concat(r," ").concat(n.slice(0,i-1).join(", "),", or ")+n[i-1]:i===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function Or(n,r,i){return n.substr(0,r.length)===r}function Mr(n,r,i){return(i===void 0||i>n.length)&&(i=n.length),n.substring(i-r.length,i)===r}function Dr(n,r,i){return typeof i!="number"&&(i=0),i+r.length>n.length?!1:n.indexOf(r,i)!==-1}ne("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError);ne("ERR_INVALID_ARG_TYPE",function(n,r,i){var u;typeof r=="string"&&Or(r,"not ")?(u="must not be",r=r.replace(/^not /,"")):u="must be";var h;if(Mr(n," argument"))h="The ".concat(n," ").concat(u," ").concat(yt(r,"type"));else{var g=Dr(n,".")?"property":"argument";h='The "'.concat(n,'" ').concat(g," ").concat(u," ").concat(yt(r,"type"))}return h+=". Received type ".concat(typeof i),h},TypeError);ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ne("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"});ne("ERR_STREAM_PREMATURE_CLOSE","Premature close");ne("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"});ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ne("ERR_STREAM_WRITE_AFTER_END","write after end");ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ne("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError);ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");_e.codes=Gt;var Pr=_e.codes.ERR_INVALID_OPT_VALUE;function kr(n,r,i){return n.highWaterMark!=null?n.highWaterMark:r?n[i]:null}function Ur(n,r,i,u){var h=kr(r,u,i);if(h!=null){if(!(isFinite(h)&&Math.floor(h)===h)||h<0){var g=u?i:"highWaterMark";throw new Pr(g,h)}return Math.floor(h)}return n.objectMode?16:16*1024}var Vt={getHighWaterMark:Ur},at={exports:{}};typeof Object.create=="function"?at.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:at.exports=function(r,i){if(i){r.super_=i;var u=function(){};u.prototype=i.prototype,r.prototype=new u,r.prototype.constructor=r}};var Oe=at.exports,jr=qr;function qr(n,r){if(Ge("noDeprecation"))return n;var i=!1;function u(){if(!i){if(Ge("throwDeprecation"))throw new Error(r);Ge("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return n.apply(this,arguments)}return u}function Ge(n){try{if(!window.localStorage)return!1}catch{return!1}var r=window.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}var Ve,_t;function Kt(){if(_t)return Ve;_t=1,Ve=U;function n(w){var y=this;this.next=null,this.entry=null,this.finish=function(){ve(y,w)}}var r;U.WritableState=P;var i={deprecate:jr},u=$t,h=xe.Buffer,g=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function p(w){return h.from(w)}function l(w){return h.isBuffer(w)||w instanceof g}var R=Yt,E=Vt,b=E.getHighWaterMark,m=_e.codes,L=m.ERR_INVALID_ARG_TYPE,M=m.ERR_METHOD_NOT_IMPLEMENTED,O=m.ERR_MULTIPLE_CALLBACK,N=m.ERR_STREAM_CANNOT_PIPE,x=m.ERR_STREAM_DESTROYED,d=m.ERR_STREAM_NULL_VALUES,S=m.ERR_STREAM_WRITE_AFTER_END,A=m.ERR_UNKNOWN_ENCODING,I=R.errorOrDestroy;Oe(U,u);function B(){}function P(w,y,T){r=r||Ae(),w=w||{},typeof T!="boolean"&&(T=y instanceof r),this.objectMode=!!w.objectMode,T&&(this.objectMode=this.objectMode||!!w.writableObjectMode),this.highWaterMark=b(this,w,"writableHighWaterMark",T),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=w.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=w.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){Be(y,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=w.emitClose!==!1,this.autoDestroy=!!w.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}P.prototype.getBuffer=function(){for(var y=this.bufferedRequest,T=[];y;)T.push(y),y=y.next;return T},function(){try{Object.defineProperty(P.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var V;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(U,Symbol.hasInstance,{value:function(y){return V.call(this,y)?!0:this!==U?!1:y&&y._writableState instanceof P}})):V=function(y){return y instanceof this};function U(w){r=r||Ae();var y=this instanceof r;if(!y&&!V.call(U,this))return new U(w);this._writableState=new P(w,this,y),this.writable=!0,w&&(typeof w.write=="function"&&(this._write=w.write),typeof w.writev=="function"&&(this._writev=w.writev),typeof w.destroy=="function"&&(this._destroy=w.destroy),typeof w.final=="function"&&(this._final=w.final)),u.call(this)}U.prototype.pipe=function(){I(this,new N)};function k(w,y){var T=new S;I(w,T),process.nextTick(y,T)}function ie(w,y,T,D){var j;return T===null?j=new d:typeof T!="string"&&!y.objectMode&&(j=new L("chunk",["string","Buffer"],T)),j?(I(w,j),process.nextTick(D,j),!1):!0}U.prototype.write=function(w,y,T){var D=this._writableState,j=!1,a=!D.objectMode&&l(w);return a&&!h.isBuffer(w)&&(w=p(w)),typeof y=="function"&&(T=y,y=null),a?y="buffer":y||(y=D.defaultEncoding),typeof T!="function"&&(T=B),D.ending?k(this,T):(a||ie(this,D,w,T))&&(D.pendingcb++,j=Ie(this,D,a,w,y,T)),j},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){var w=this._writableState;w.corked&&(w.corked--,!w.writing&&!w.corked&&!w.bufferProcessing&&w.bufferedRequest&&le(this,w))},U.prototype.setDefaultEncoding=function(y){if(typeof y=="string"&&(y=y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((y+"").toLowerCase())>-1))throw new A(y);return this._writableState.defaultEncoding=y,this},Object.defineProperty(U.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ce(w,y,T){return!w.objectMode&&w.decodeStrings!==!1&&typeof y=="string"&&(y=h.from(y,T)),y}Object.defineProperty(U.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ie(w,y,T,D,j,a){if(!T){var f=ce(y,D,j);D!==f&&(T=!0,j="buffer",D=f)}var C=y.objectMode?1:D.length;y.length+=C;var F=y.length<y.highWaterMark;if(F||(y.needDrain=!0),y.writing||y.corked){var K=y.lastBufferedRequest;y.lastBufferedRequest={chunk:D,encoding:j,isBuf:T,callback:a,next:null},K?K.next=y.lastBufferedRequest:y.bufferedRequest=y.lastBufferedRequest,y.bufferedRequestCount+=1}else ue(w,y,!1,C,D,j,a);return F}function ue(w,y,T,D,j,a,f){y.writelen=D,y.writecb=f,y.writing=!0,y.sync=!0,y.destroyed?y.onwrite(new x("write")):T?w._writev(j,y.onwrite):w._write(j,a,y.onwrite),y.sync=!1}function we(w,y,T,D,j){--y.pendingcb,T?(process.nextTick(j,D),process.nextTick(oe,w,y),w._writableState.errorEmitted=!0,I(w,D)):(j(D),w._writableState.errorEmitted=!0,I(w,D),oe(w,y))}function de(w){w.writing=!1,w.writecb=null,w.length-=w.writelen,w.writelen=0}function Be(w,y){var T=w._writableState,D=T.sync,j=T.writecb;if(typeof j!="function")throw new O;if(de(T),y)we(w,T,D,y,j);else{var a=Ee(T)||w.destroyed;!a&&!T.corked&&!T.bufferProcessing&&T.bufferedRequest&&le(w,T),D?process.nextTick(ae,w,T,a,j):ae(w,T,a,j)}}function ae(w,y,T,D){T||be(w,y),y.pendingcb--,D(),oe(w,y)}function be(w,y){y.length===0&&y.needDrain&&(y.needDrain=!1,w.emit("drain"))}function le(w,y){y.bufferProcessing=!0;var T=y.bufferedRequest;if(w._writev&&T&&T.next){var D=y.bufferedRequestCount,j=new Array(D),a=y.corkedRequestsFree;a.entry=T;for(var f=0,C=!0;T;)j[f]=T,T.isBuf||(C=!1),T=T.next,f+=1;j.allBuffers=C,ue(w,y,!0,y.length,j,"",a.finish),y.pendingcb++,y.lastBufferedRequest=null,a.next?(y.corkedRequestsFree=a.next,a.next=null):y.corkedRequestsFree=new n(y),y.bufferedRequestCount=0}else{for(;T;){var F=T.chunk,K=T.encoding,q=T.callback,H=y.objectMode?1:F.length;if(ue(w,y,!1,H,F,K,q),T=T.next,y.bufferedRequestCount--,y.writing)break}T===null&&(y.lastBufferedRequest=null)}y.bufferedRequest=T,y.bufferProcessing=!1}U.prototype._write=function(w,y,T){T(new M("_write()"))},U.prototype._writev=null,U.prototype.end=function(w,y,T){var D=this._writableState;return typeof w=="function"?(T=w,w=null,y=null):typeof y=="function"&&(T=y,y=null),w!=null&&this.write(w,y),D.corked&&(D.corked=1,this.uncork()),D.ending||me(this,D,T),this},Object.defineProperty(U.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ee(w){return w.ending&&w.length===0&&w.bufferedRequest===null&&!w.finished&&!w.writing}function J(w,y){w._final(function(T){y.pendingcb--,T&&I(w,T),y.prefinished=!0,w.emit("prefinish"),oe(w,y)})}function Q(w,y){!y.prefinished&&!y.finalCalled&&(typeof w._final=="function"&&!y.destroyed?(y.pendingcb++,y.finalCalled=!0,process.nextTick(J,w,y)):(y.prefinished=!0,w.emit("prefinish")))}function oe(w,y){var T=Ee(y);if(T&&(Q(w,y),y.pendingcb===0&&(y.finished=!0,w.emit("finish"),y.autoDestroy))){var D=w._readableState;(!D||D.autoDestroy&&D.endEmitted)&&w.destroy()}return T}function me(w,y,T){y.ending=!0,oe(w,y),T&&(y.finished?process.nextTick(T):w.once("finish",T)),y.ended=!0,w.writable=!1}function ve(w,y,T){var D=w.entry;for(w.entry=null;D;){var j=D.callback;y.pendingcb--,j(T),D=D.next}y.corkedRequestsFree.next=w}return Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(y){this._writableState&&(this._writableState.destroyed=y)}}),U.prototype.destroy=R.destroy,U.prototype._undestroy=R.undestroy,U.prototype._destroy=function(w,y){y(w)},Ve}var Ke,wt;function Ae(){if(wt)return Ke;wt=1;var n=Object.keys||function(E){var b=[];for(var m in E)b.push(m);return b};Ke=p;var r=Jt(),i=Kt();Oe(p,r);for(var u=n(i.prototype),h=0;h<u.length;h++){var g=u[h];p.prototype[g]||(p.prototype[g]=i.prototype[g])}function p(E){if(!(this instanceof p))return new p(E);r.call(this,E),i.call(this,E),this.allowHalfOpen=!0,E&&(E.readable===!1&&(this.readable=!1),E.writable===!1&&(this.writable=!1),E.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||process.nextTick(R,this)}function R(E){E.end()}return Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),Ke}var Xe={},bt;function Et(){if(bt)return Xe;bt=1;var n=Lt.Buffer,r=n.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(d){if(!d)return"utf8";for(var S;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(S)return;d=(""+d).toLowerCase(),S=!0}}function u(d){var S=i(d);if(typeof S!="string"&&(n.isEncoding===r||!r(d)))throw new Error("Unknown encoding: "+d);return S||d}Xe.StringDecoder=h;function h(d){this.encoding=u(d);var S;switch(this.encoding){case"utf16le":this.text=m,this.end=L,S=4;break;case"utf8":this.fillLast=R,S=4;break;case"base64":this.text=M,this.end=O,S=3;break;default:this.write=N,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(S)}h.prototype.write=function(d){if(d.length===0)return"";var S,A;if(this.lastNeed){if(S=this.fillLast(d),S===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<d.length?S?S+this.text(d,A):this.text(d,A):S||""},h.prototype.end=b,h.prototype.text=E,h.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length};function g(d){return d<=127?0:d>>5===6?2:d>>4===14?3:d>>3===30?4:d>>6===2?-1:-2}function p(d,S,A){var I=S.length-1;if(I<A)return 0;var B=g(S[I]);return B>=0?(B>0&&(d.lastNeed=B-1),B):--I<A||B===-2?0:(B=g(S[I]),B>=0?(B>0&&(d.lastNeed=B-2),B):--I<A||B===-2?0:(B=g(S[I]),B>=0?(B>0&&(B===2?B=0:d.lastNeed=B-3),B):0))}function l(d,S,A){if((S[0]&192)!==128)return d.lastNeed=0,"";if(d.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return d.lastNeed=1,"";if(d.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return d.lastNeed=2,""}}function R(d){var S=this.lastTotal-this.lastNeed,A=l(this,d);if(A!==void 0)return A;if(this.lastNeed<=d.length)return d.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,S,0,d.length),this.lastNeed-=d.length}function E(d,S){var A=p(this,d,S);if(!this.lastNeed)return d.toString("utf8",S);this.lastTotal=A;var I=d.length-(A-this.lastNeed);return d.copy(this.lastChar,0,I),d.toString("utf8",S,I)}function b(d){var S=d&&d.length?this.write(d):"";return this.lastNeed?S+"":S}function m(d,S){if((d.length-S)%2===0){var A=d.toString("utf16le",S);if(A){var I=A.charCodeAt(A.length-1);if(I>=55296&&I<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",S,d.length-1)}function L(d){var S=d&&d.length?this.write(d):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,A)}return S}function M(d,S){var A=(d.length-S)%3;return A===0?d.toString("base64",S):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",S,d.length-A))}function O(d){var S=d&&d.length?this.write(d):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function N(d){return d.toString(this.encoding)}function x(d){return d&&d.length?this.write(d):""}return Xe}var mt=_e.codes.ERR_STREAM_PREMATURE_CLOSE;function Wr(n){var r=!1;return function(){if(!r){r=!0;for(var i=arguments.length,u=new Array(i),h=0;h<i;h++)u[h]=arguments[h];n.apply(this,u)}}}function $r(){}function Hr(n){return n.setHeader&&typeof n.abort=="function"}function Xt(n,r,i){if(typeof r=="function")return Xt(n,null,r);r||(r={}),i=Wr(i||$r);var u=r.readable||r.readable!==!1&&n.readable,h=r.writable||r.writable!==!1&&n.writable,g=function(){n.writable||l()},p=n._writableState&&n._writableState.finished,l=function(){h=!1,p=!0,u||i.call(n)},R=n._readableState&&n._readableState.endEmitted,E=function(){u=!1,R=!0,h||i.call(n)},b=function(O){i.call(n,O)},m=function(){var O;if(u&&!R)return(!n._readableState||!n._readableState.ended)&&(O=new mt),i.call(n,O);if(h&&!p)return(!n._writableState||!n._writableState.ended)&&(O=new mt),i.call(n,O)},L=function(){n.req.on("finish",l)};return Hr(n)?(n.on("complete",l),n.on("abort",m),n.req?L():n.on("request",L)):h&&!n._writableState&&(n.on("end",g),n.on("close",g)),n.on("end",E),n.on("finish",l),r.error!==!1&&n.on("error",b),n.on("close",m),function(){n.removeListener("complete",l),n.removeListener("abort",m),n.removeListener("request",L),n.req&&n.req.removeListener("finish",l),n.removeListener("end",g),n.removeListener("close",g),n.removeListener("finish",l),n.removeListener("end",E),n.removeListener("error",b),n.removeListener("close",m)}}var lt=Xt,Je,vt;function Yr(){if(vt)return Je;vt=1;var n;function r(A,I,B){return I=i(I),I in A?Object.defineProperty(A,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):A[I]=B,A}function i(A){var I=u(A,"string");return typeof I=="symbol"?I:String(I)}function u(A,I){if(typeof A!="object"||A===null)return A;var B=A[Symbol.toPrimitive];if(B!==void 0){var P=B.call(A,I);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(A)}var h=lt,g=Symbol("lastResolve"),p=Symbol("lastReject"),l=Symbol("error"),R=Symbol("ended"),E=Symbol("lastPromise"),b=Symbol("handlePromise"),m=Symbol("stream");function L(A,I){return{value:A,done:I}}function M(A){var I=A[g];if(I!==null){var B=A[m].read();B!==null&&(A[E]=null,A[g]=null,A[p]=null,I(L(B,!1)))}}function O(A){process.nextTick(M,A)}function N(A,I){return function(B,P){A.then(function(){if(I[R]){B(L(void 0,!0));return}I[b](B,P)},P)}}var x=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((n={get stream(){return this[m]},next:function(){var I=this,B=this[l];if(B!==null)return Promise.reject(B);if(this[R])return Promise.resolve(L(void 0,!0));if(this[m].destroyed)return new Promise(function(k,ie){process.nextTick(function(){I[l]?ie(I[l]):k(L(void 0,!0))})});var P=this[E],V;if(P)V=new Promise(N(P,this));else{var U=this[m].read();if(U!==null)return Promise.resolve(L(U,!1));V=new Promise(this[b])}return this[E]=V,V}},r(n,Symbol.asyncIterator,function(){return this}),r(n,"return",function(){var I=this;return new Promise(function(B,P){I[m].destroy(null,function(V){if(V){P(V);return}B(L(void 0,!0))})})}),n),x),S=function(I){var B,P=Object.create(d,(B={},r(B,m,{value:I,writable:!0}),r(B,g,{value:null,writable:!0}),r(B,p,{value:null,writable:!0}),r(B,l,{value:null,writable:!0}),r(B,R,{value:I._readableState.endEmitted,writable:!0}),r(B,b,{value:function(U,k){var ie=P[m].read();ie?(P[E]=null,P[g]=null,P[p]=null,U(L(ie,!1))):(P[g]=U,P[p]=k)},writable:!0}),B));return P[E]=null,h(I,function(V){if(V&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"){var U=P[p];U!==null&&(P[E]=null,P[g]=null,P[p]=null,U(V)),P[l]=V;return}var k=P[g];k!==null&&(P[E]=null,P[g]=null,P[p]=null,k(L(void 0,!0))),P[R]=!0}),I.on("readable",O.bind(null,P)),P};return Je=S,Je}var ze,Rt;function Gr(){return Rt||(Rt=1,ze=function(){throw new Error("Readable.from is not available in the browser")}),ze}var Ze,Ct;function Jt(){if(Ct)return Ze;Ct=1,Ze=k;var n;k.ReadableState=U,Wt.EventEmitter;var r=function(f,C){return f.listeners(C).length},i=$t,u=xe.Buffer,h=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function g(a){return u.from(a)}function p(a){return u.isBuffer(a)||a instanceof h}var l=Ht,R;l&&l.debuglog?R=l.debuglog("stream"):R=function(){};var E=Ir(),b=Yt,m=Vt,L=m.getHighWaterMark,M=_e.codes,O=M.ERR_INVALID_ARG_TYPE,N=M.ERR_STREAM_PUSH_AFTER_EOF,x=M.ERR_METHOD_NOT_IMPLEMENTED,d=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,A,I;Oe(k,i);var B=b.errorOrDestroy,P=["error","close","destroy","pause","resume"];function V(a,f,C){if(typeof a.prependListener=="function")return a.prependListener(f,C);!a._events||!a._events[f]?a.on(f,C):Array.isArray(a._events[f])?a._events[f].unshift(C):a._events[f]=[C,a._events[f]]}function U(a,f,C){n=n||Ae(),a=a||{},typeof C!="boolean"&&(C=f instanceof n),this.objectMode=!!a.objectMode,C&&(this.objectMode=this.objectMode||!!a.readableObjectMode),this.highWaterMark=L(this,a,"readableHighWaterMark",C),this.buffer=new E,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=a.emitClose!==!1,this.autoDestroy=!!a.autoDestroy,this.destroyed=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(S||(S=Et().StringDecoder),this.decoder=new S(a.encoding),this.encoding=a.encoding)}function k(a){if(n=n||Ae(),!(this instanceof k))return new k(a);var f=this instanceof n;this._readableState=new U(a,this,f),this.readable=!0,a&&(typeof a.read=="function"&&(this._read=a.read),typeof a.destroy=="function"&&(this._destroy=a.destroy)),i.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(f){this._readableState&&(this._readableState.destroyed=f)}}),k.prototype.destroy=b.destroy,k.prototype._undestroy=b.undestroy,k.prototype._destroy=function(a,f){f(a)},k.prototype.push=function(a,f){var C=this._readableState,F;return C.objectMode?F=!0:typeof a=="string"&&(f=f||C.defaultEncoding,f!==C.encoding&&(a=u.from(a,f),f=""),F=!0),ie(this,a,f,!1,F)},k.prototype.unshift=function(a){return ie(this,a,null,!0,!1)};function ie(a,f,C,F,K){R("readableAddChunk",f);var q=a._readableState;if(f===null)q.reading=!1,Be(a,q);else{var H;if(K||(H=Ie(q,f)),H)B(a,H);else if(q.objectMode||f&&f.length>0)if(typeof f!="string"&&!q.objectMode&&Object.getPrototypeOf(f)!==u.prototype&&(f=g(f)),F)q.endEmitted?B(a,new d):ce(a,q,f,!0);else if(q.ended)B(a,new N);else{if(q.destroyed)return!1;q.reading=!1,q.decoder&&!C?(f=q.decoder.write(f),q.objectMode||f.length!==0?ce(a,q,f,!1):le(a,q)):ce(a,q,f,!1)}else F||(q.reading=!1,le(a,q))}return!q.ended&&(q.length<q.highWaterMark||q.length===0)}function ce(a,f,C,F){f.flowing&&f.length===0&&!f.sync?(f.awaitDrain=0,a.emit("data",C)):(f.length+=f.objectMode?1:C.length,F?f.buffer.unshift(C):f.buffer.push(C),f.needReadable&&ae(a)),le(a,f)}function Ie(a,f){var C;return!p(f)&&typeof f!="string"&&f!==void 0&&!a.objectMode&&(C=new O("chunk",["string","Buffer","Uint8Array"],f)),C}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(a){S||(S=Et().StringDecoder);var f=new S(a);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;for(var C=this._readableState.buffer.head,F="";C!==null;)F+=f.write(C.data),C=C.next;return this._readableState.buffer.clear(),F!==""&&this._readableState.buffer.push(F),this._readableState.length=F.length,this};var ue=1073741824;function we(a){return a>=ue?a=ue:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function de(a,f){return a<=0||f.length===0&&f.ended?0:f.objectMode?1:a!==a?f.flowing&&f.length?f.buffer.head.data.length:f.length:(a>f.highWaterMark&&(f.highWaterMark=we(a)),a<=f.length?a:f.ended?f.length:(f.needReadable=!0,0))}k.prototype.read=function(a){R("read",a),a=parseInt(a,10);var f=this._readableState,C=a;if(a!==0&&(f.emittedReadable=!1),a===0&&f.needReadable&&((f.highWaterMark!==0?f.length>=f.highWaterMark:f.length>0)||f.ended))return R("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?T(this):ae(this),null;if(a=de(a,f),a===0&&f.ended)return f.length===0&&T(this),null;var F=f.needReadable;R("need readable",F),(f.length===0||f.length-a<f.highWaterMark)&&(F=!0,R("length less than watermark",F)),f.ended||f.reading?(F=!1,R("reading or ended",F)):F&&(R("do read"),f.reading=!0,f.sync=!0,f.length===0&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1,f.reading||(a=de(C,f)));var K;return a>0?K=y(a,f):K=null,K===null?(f.needReadable=f.length<=f.highWaterMark,a=0):(f.length-=a,f.awaitDrain=0),f.length===0&&(f.ended||(f.needReadable=!0),C!==a&&f.ended&&T(this)),K!==null&&this.emit("data",K),K};function Be(a,f){if(R("onEofChunk"),!f.ended){if(f.decoder){var C=f.decoder.end();C&&C.length&&(f.buffer.push(C),f.length+=f.objectMode?1:C.length)}f.ended=!0,f.sync?ae(a):(f.needReadable=!1,f.emittedReadable||(f.emittedReadable=!0,be(a)))}}function ae(a){var f=a._readableState;R("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(R("emitReadable",f.flowing),f.emittedReadable=!0,process.nextTick(be,a))}function be(a){var f=a._readableState;R("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&(f.length||f.ended)&&(a.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,w(a)}function le(a,f){f.readingMore||(f.readingMore=!0,process.nextTick(Ee,a,f))}function Ee(a,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){var C=f.length;if(R("maybeReadMore read 0"),a.read(0),C===f.length)break}f.readingMore=!1}k.prototype._read=function(a){B(this,new x("_read()"))},k.prototype.pipe=function(a,f){var C=this,F=this._readableState;switch(F.pipesCount){case 0:F.pipes=a;break;case 1:F.pipes=[F.pipes,a];break;default:F.pipes.push(a);break}F.pipesCount+=1,R("pipe count=%d opts=%j",F.pipesCount,f);var K=(!f||f.end!==!1)&&a!==process.stdout&&a!==process.stderr,q=K?he:ge;F.endEmitted?process.nextTick(q):C.once("end",q),a.on("unpipe",H);function H(o,e){R("onunpipe"),o===C&&e&&e.hasUnpiped===!1&&(e.hasUnpiped=!0,Ce())}function he(){R("onend"),a.end()}var Re=J(C);a.on("drain",Re);var Fe=!1;function Ce(){R("cleanup"),a.removeListener("close",Ne),a.removeListener("finish",te),a.removeListener("drain",Re),a.removeListener("error",pe),a.removeListener("unpipe",H),C.removeListener("end",he),C.removeListener("end",ge),C.removeListener("data",ee),Fe=!0,F.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&Re()}C.on("data",ee);function ee(o){R("ondata");var e=a.write(o);R("dest.write",e),e===!1&&((F.pipesCount===1&&F.pipes===a||F.pipesCount>1&&j(F.pipes,a)!==-1)&&!Fe&&(R("false write response, pause",F.awaitDrain),F.awaitDrain++),C.pause())}function pe(o){R("onerror",o),ge(),a.removeListener("error",pe),r(a,"error")===0&&B(a,o)}V(a,"error",pe);function Ne(){a.removeListener("finish",te),ge()}a.once("close",Ne);function te(){R("onfinish"),a.removeListener("close",Ne),ge()}a.once("finish",te);function ge(){R("unpipe"),C.unpipe(a)}return a.emit("pipe",C),F.flowing||(R("pipe resume"),C.resume()),a};function J(a){return function(){var C=a._readableState;R("pipeOnDrain",C.awaitDrain),C.awaitDrain&&C.awaitDrain--,C.awaitDrain===0&&r(a,"data")&&(C.flowing=!0,w(a))}}k.prototype.unpipe=function(a){var f=this._readableState,C={hasUnpiped:!1};if(f.pipesCount===0)return this;if(f.pipesCount===1)return a&&a!==f.pipes?this:(a||(a=f.pipes),f.pipes=null,f.pipesCount=0,f.flowing=!1,a&&a.emit("unpipe",this,C),this);if(!a){var F=f.pipes,K=f.pipesCount;f.pipes=null,f.pipesCount=0,f.flowing=!1;for(var q=0;q<K;q++)F[q].emit("unpipe",this,{hasUnpiped:!1});return this}var H=j(f.pipes,a);return H===-1?this:(f.pipes.splice(H,1),f.pipesCount-=1,f.pipesCount===1&&(f.pipes=f.pipes[0]),a.emit("unpipe",this,C),this)},k.prototype.on=function(a,f){var C=i.prototype.on.call(this,a,f),F=this._readableState;return a==="data"?(F.readableListening=this.listenerCount("readable")>0,F.flowing!==!1&&this.resume()):a==="readable"&&!F.endEmitted&&!F.readableListening&&(F.readableListening=F.needReadable=!0,F.flowing=!1,F.emittedReadable=!1,R("on readable",F.length,F.reading),F.length?ae(this):F.reading||process.nextTick(oe,this)),C},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(a,f){var C=i.prototype.removeListener.call(this,a,f);return a==="readable"&&process.nextTick(Q,this),C},k.prototype.removeAllListeners=function(a){var f=i.prototype.removeAllListeners.apply(this,arguments);return(a==="readable"||a===void 0)&&process.nextTick(Q,this),f};function Q(a){var f=a._readableState;f.readableListening=a.listenerCount("readable")>0,f.resumeScheduled&&!f.paused?f.flowing=!0:a.listenerCount("data")>0&&a.resume()}function oe(a){R("readable nexttick read 0"),a.read(0)}k.prototype.resume=function(){var a=this._readableState;return a.flowing||(R("resume"),a.flowing=!a.readableListening,me(this,a)),a.paused=!1,this};function me(a,f){f.resumeScheduled||(f.resumeScheduled=!0,process.nextTick(ve,a,f))}function ve(a,f){R("resume",f.reading),f.reading||a.read(0),f.resumeScheduled=!1,a.emit("resume"),w(a),f.flowing&&!f.reading&&a.read(0)}k.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function w(a){var f=a._readableState;for(R("flow",f.flowing);f.flowing&&a.read()!==null;);}k.prototype.wrap=function(a){var f=this,C=this._readableState,F=!1;a.on("end",function(){if(R("wrapped end"),C.decoder&&!C.ended){var H=C.decoder.end();H&&H.length&&f.push(H)}f.push(null)}),a.on("data",function(H){if(R("wrapped data"),C.decoder&&(H=C.decoder.write(H)),!(C.objectMode&&H==null)&&!(!C.objectMode&&(!H||!H.length))){var he=f.push(H);he||(F=!0,a.pause())}});for(var K in a)this[K]===void 0&&typeof a[K]=="function"&&(this[K]=function(he){return function(){return a[he].apply(a,arguments)}}(K));for(var q=0;q<P.length;q++)a.on(P[q],this.emit.bind(this,P[q]));return this._read=function(H){R("wrapped _read",H),F&&(F=!1,a.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return A===void 0&&(A=Yr()),A(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}}),k._fromList=y,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function y(a,f){if(f.length===0)return null;var C;return f.objectMode?C=f.buffer.shift():!a||a>=f.length?(f.decoder?C=f.buffer.join(""):f.buffer.length===1?C=f.buffer.first():C=f.buffer.concat(f.length),f.buffer.clear()):C=f.buffer.consume(a,f.decoder),C}function T(a){var f=a._readableState;R("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,process.nextTick(D,f,a))}function D(a,f){if(R("endReadableNT",a.endEmitted,a.length),!a.endEmitted&&a.length===0&&(a.endEmitted=!0,f.readable=!1,f.emit("end"),a.autoDestroy)){var C=f._writableState;(!C||C.autoDestroy&&C.finished)&&f.destroy()}}typeof Symbol=="function"&&(k.from=function(a,f){return I===void 0&&(I=Gr()),I(k,a,f)});function j(a,f){for(var C=0,F=a.length;C<F;C++)if(a[C]===f)return C;return-1}return Ze}var zt=fe,je=_e.codes,Vr=je.ERR_METHOD_NOT_IMPLEMENTED,Kr=je.ERR_MULTIPLE_CALLBACK,Xr=je.ERR_TRANSFORM_ALREADY_TRANSFORMING,Jr=je.ERR_TRANSFORM_WITH_LENGTH_0,qe=Ae();Oe(fe,qe);function zr(n,r){var i=this._transformState;i.transforming=!1;var u=i.writecb;if(u===null)return this.emit("error",new Kr);i.writechunk=null,i.writecb=null,r!=null&&this.push(r),u(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function fe(n){if(!(this instanceof fe))return new fe(n);qe.call(this,n),this._transformState={afterTransform:zr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",Zr)}function Zr(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(r,i){St(n,r,i)}):St(this,null,null)}fe.prototype.push=function(n,r){return this._transformState.needTransform=!1,qe.prototype.push.call(this,n,r)};fe.prototype._transform=function(n,r,i){i(new Vr("_transform()"))};fe.prototype._write=function(n,r,i){var u=this._transformState;if(u.writecb=i,u.writechunk=n,u.writeencoding=r,!u.transforming){var h=this._readableState;(u.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}};fe.prototype._read=function(n){var r=this._transformState;r.writechunk!==null&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};fe.prototype._destroy=function(n,r){qe.prototype._destroy.call(this,n,function(i){r(i)})};function St(n,r,i){if(r)return n.emit("error",r);if(i!=null&&n.push(i),n._writableState.length)throw new Jr;if(n._transformState.transforming)throw new Xr;return n.push(null)}var Qr=Le,Zt=zt;Oe(Le,Zt);function Le(n){if(!(this instanceof Le))return new Le(n);Zt.call(this,n)}Le.prototype._transform=function(n,r,i){i(null,n)};var Qe;function en(n){var r=!1;return function(){r||(r=!0,n.apply(void 0,arguments))}}var Qt=_e.codes,tn=Qt.ERR_MISSING_ARGS,rn=Qt.ERR_STREAM_DESTROYED;function Tt(n){if(n)throw n}function nn(n){return n.setHeader&&typeof n.abort=="function"}function on(n,r,i,u){u=en(u);var h=!1;n.on("close",function(){h=!0}),Qe===void 0&&(Qe=lt),Qe(n,{readable:r,writable:i},function(p){if(p)return u(p);h=!0,u()});var g=!1;return function(p){if(!h&&!g){if(g=!0,nn(n))return n.abort();if(typeof n.destroy=="function")return n.destroy();u(p||new rn("pipe"))}}}function At(n){n()}function sn(n,r){return n.pipe(r)}function an(n){return!n.length||typeof n[n.length-1]!="function"?Tt:n.pop()}function fn(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var u=an(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new tn("streams");var h,g=r.map(function(p,l){var R=l<r.length-1,E=l>0;return on(p,R,E,function(b){h||(h=b),b&&g.forEach(At),!R&&(g.forEach(At),u(h))})});return r.reduce(sn)}var un=fn;(function(n,r){r=n.exports=Jt(),r.Stream=r,r.Readable=r,r.Writable=Kt(),r.Duplex=Ae(),r.Transform=zt,r.PassThrough=Qr,r.finished=lt,r.pipeline=un})(ot,ot.exports);var ln=ot.exports;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let xt;var hn=typeof queueMicrotask=="function"?queueMicrotask.bind(window):n=>(xt||(xt=Promise.resolve())).then(n).catch(r=>setTimeout(()=>{throw r},0));function It(n,r){for(const i in r)Object.defineProperty(n,i,{value:r[i],enumerable:!0,configurable:!0});return n}function cn(n,r,i){if(!n||typeof n=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof r=="object"&&(i=r,r=""),r&&(i.code=r);try{return It(n,i)}catch{i.message=n.message,i.stack=n.stack;const h=function(){};return h.prototype=Object.create(Object.getPrototypeOf(n)),It(new h,i)}}var dn=cn;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const pn=sr("simple-peer"),er=ar,Bt=Er,gn=ln,et=hn,$=dn,{Buffer:yn}=xe,tt=64*1024,_n=5*1e3,wn=5*1e3;function Ft(n){return n.replace(/a=ice-options:trickle\s\n/g,"")}function bn(n){console.warn(n)}class ye extends gn.Duplex{constructor(r){if(r=Object.assign({allowHalfOpen:!1},r),super(r),this._id=Bt(4).toString("hex").slice(0,7),this._debug("new peer %o",r),this.channelName=r.initiator?r.channelName||Bt(20).toString("hex"):null,this.initiator=r.initiator||!1,this.channelConfig=r.channelConfig||ye.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},ye.config,r.config),this.offerOptions=r.offerOptions||{},this.answerOptions=r.answerOptions||{},this.sdpTransform=r.sdpTransform||(i=>i),this.streams=r.streams||(r.stream?[r.stream]:[]),this.trickle=r.trickle!==void 0?r.trickle:!0,this.allowHalfTrickle=r.allowHalfTrickle!==void 0?r.allowHalfTrickle:!1,this.iceCompleteTimeout=r.iceCompleteTimeout||_n,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=r.wrtc&&typeof r.wrtc=="object"?r.wrtc:er(),!this._wrtc)throw $(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(i){this.destroy($(i,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=i=>{this._onIceCandidate(i)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(i=>{this.destroy($(i,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=i=>{this._setupData(i)},this.streams&&this.streams.forEach(i=>{this.addStream(i)}),this._pc.ontrack=i=>{this._onTrack(i)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(r){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof r=="string")try{r=JSON.parse(r)}catch{r={}}this._debug("signal()"),r.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),r.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(r.transceiverRequest.kind,r.transceiverRequest.init)),r.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(r.candidate):this._pendingCandidates.push(r.candidate)),r.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(r)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(i=>{this._addIceCandidate(i)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(i=>{this.destroy($(i,"ERR_SET_REMOTE_DESCRIPTION"))}),!r.sdp&&!r.candidate&&!r.renegotiate&&!r.transceiverRequest&&this.destroy($(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(r){const i=new this._wrtc.RTCIceCandidate(r);this._pc.addIceCandidate(i).catch(u=>{!i.address||i.address.endsWith(".local")?bn("Ignoring unsupported ICE candidate."):this.destroy($(u,"ERR_ADD_ICE_CANDIDATE"))})}send(r){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(r)}}addTransceiver(r,i){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(r,i),this._needsNegotiation()}catch(u){this.destroy($(u,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:r,init:i}})}}addStream(r){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),r.getTracks().forEach(i=>{this.addTrack(i,r)})}}addTrack(r,i){if(this.destroying)return;if(this.destroyed)throw $(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const u=this._senderMap.get(r)||new Map;let h=u.get(i);if(!h)h=this._pc.addTrack(r,i),u.set(i,h),this._senderMap.set(r,u),this._needsNegotiation();else throw h.removed?$(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):$(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(r,i,u){if(this.destroying)return;if(this.destroyed)throw $(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const h=this._senderMap.get(r),g=h?h.get(u):null;if(!g)throw $(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");i&&this._senderMap.set(i,h),g.replaceTrack!=null?g.replaceTrack(i):this.destroy($(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(r,i){if(this.destroying)return;if(this.destroyed)throw $(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const u=this._senderMap.get(r),h=u?u.get(i):null;if(!h)throw $(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{h.removed=!0,this._pc.removeTrack(h)}catch(g){g.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(h):this.destroy($(g,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(r){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),r.getTracks().forEach(i=>{this.removeTrack(i,r)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,et(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(r){this._destroy(r,()=>{})}_destroy(r,i){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",r&&(r.message||r)),et(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",r&&(r.message||r)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,r&&this.emit("error",r),this.emit("close"),i()}))}_setupData(r){if(!r.channel)return this.destroy($(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=r.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=tt),this.channelName=this._channel.label,this._channel.onmessage=u=>{this._onChannelMessage(u)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=u=>{const h=u.error instanceof Error?u.error:new Error(`Datachannel error: ${u.message} ${u.filename}:${u.lineno}:${u.colno}`);this.destroy($(h,"ERR_DATA_CHANNEL"))};let i=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(i&&this._onChannelClose(),i=!0):i=!1},wn)}_read(){}_write(r,i,u){if(this.destroyed)return u($(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(r)}catch(h){return this.destroy($(h,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>tt?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=u):u(null)}else this._debug("write before connect"),this._chunk=r,this._cb=u}_onFinish(){if(this.destroyed)return;const r=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?r():this.once("connect",r)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(r=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(r.sdp=Ft(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const i=()=>{if(this.destroyed)return;const g=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:g.type,sdp:g.sdp})},u=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?i():this.once("_iceComplete",i))},h=g=>{this.destroy($(g,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(r).then(u).catch(h)}).catch(r=>{this.destroy($(r,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(r=>{!r.mid&&r.sender.track&&!r.requested&&(r.requested=!0,this.addTransceiver(r.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(r=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(r.sdp=Ft(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const i=()=>{if(this.destroyed)return;const g=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:g.type,sdp:g.sdp}),this.initiator||this._requestMissingTransceivers()},u=()=>{this.destroyed||(this.trickle||this._iceComplete?i():this.once("_iceComplete",i))},h=g=>{this.destroy($(g,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(r).then(u).catch(h)}).catch(r=>{this.destroy($(r,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy($(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const r=this._pc.iceConnectionState,i=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",r,i),this.emit("iceStateChange",r,i),(r==="connected"||r==="completed")&&(this._pcReady=!0,this._maybeReady()),r==="failed"&&this.destroy($(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),r==="closed"&&this.destroy($(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(r){const i=u=>(Object.prototype.toString.call(u.values)==="[object Array]"&&u.values.forEach(h=>{Object.assign(u,h)}),u);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(u=>{const h=[];u.forEach(g=>{h.push(i(g))}),r(null,h)},u=>r(u)):this._pc.getStats.length>0?this._pc.getStats(u=>{if(this.destroyed)return;const h=[];u.result().forEach(g=>{const p={};g.names().forEach(l=>{p[l]=g.stat(l)}),p.id=g.id,p.type=g.type,p.timestamp=g.timestamp,h.push(i(p))}),r(null,h)},u=>r(u)):r(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const r=()=>{this.destroyed||this.getStats((i,u)=>{if(this.destroyed)return;i&&(u=[]);const h={},g={},p={};let l=!1;u.forEach(E=>{(E.type==="remotecandidate"||E.type==="remote-candidate")&&(h[E.id]=E),(E.type==="localcandidate"||E.type==="local-candidate")&&(g[E.id]=E),(E.type==="candidatepair"||E.type==="candidate-pair")&&(p[E.id]=E)});const R=E=>{l=!0;let b=g[E.localCandidateId];b&&(b.ip||b.address)?(this.localAddress=b.ip||b.address,this.localPort=Number(b.port)):b&&b.ipAddress?(this.localAddress=b.ipAddress,this.localPort=Number(b.portNumber)):typeof E.googLocalAddress=="string"&&(b=E.googLocalAddress.split(":"),this.localAddress=b[0],this.localPort=Number(b[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let m=h[E.remoteCandidateId];m&&(m.ip||m.address)?(this.remoteAddress=m.ip||m.address,this.remotePort=Number(m.port)):m&&m.ipAddress?(this.remoteAddress=m.ipAddress,this.remotePort=Number(m.portNumber)):typeof E.googRemoteAddress=="string"&&(m=E.googRemoteAddress.split(":"),this.remoteAddress=m[0],this.remotePort=Number(m[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(u.forEach(E=>{E.type==="transport"&&E.selectedCandidatePairId&&R(p[E.selectedCandidatePairId]),(E.type==="googCandidatePair"&&E.googActiveConnection==="true"||(E.type==="candidatepair"||E.type==="candidate-pair")&&E.selected)&&R(E)}),!l&&(!Object.keys(p).length||Object.keys(g).length)){setTimeout(r,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(b){return this.destroy($(b,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const E=this._cb;this._cb=null,E(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};r()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>tt||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(r=>{this._pc.removeTrack(r),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(r){this.destroyed||(r.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:r.candidate.candidate,sdpMLineIndex:r.candidate.sdpMLineIndex,sdpMid:r.candidate.sdpMid}}):!r.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),r.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(r){if(this.destroyed)return;let i=r.data;i instanceof ArrayBuffer&&(i=yn.from(i)),this.push(i)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const r=this._cb;this._cb=null,r(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(r){this.destroyed||r.streams.forEach(i=>{this._debug("on track"),this.emit("track",r.track,i),this._remoteTracks.push({track:r.track,stream:i}),!this._remoteStreams.some(u=>u.id===i.id)&&(this._remoteStreams.push(i),et(()=>{this._debug("on stream"),this.emit("stream",i)}))})}_debug(){const r=[].slice.call(arguments);r[0]="["+this._id+"] "+r[0],pn.apply(null,r)}}ye.WEBRTC_SUPPORT=!!er();ye.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};ye.channelConfig={};var En=ye;const Rn=rr(En);export{Rn as P};
//# sourceMappingURL=webrtc-C8QLckjl.js.map
