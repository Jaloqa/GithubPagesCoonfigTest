{"version":3,"file":"index-BBsbIDq_.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/shared/api/mediasoupApi.js","../../src/shared/api/socketApi.js","../../src/pages/HomePage/HomePage.jsx","../../src/shared/api/videoApi.js","../../src/pages/GamePage/PlayerVideo.jsx","../../src/pages/GamePage/GamePage.jsx","../../src/shared/config/routeConfig.jsx","../../src/app/providers/router/AppRouter.jsx","../../src/widgets/Header/Header.jsx","../../src/widgets/Footer/Footer.jsx","../../src/widgets/Layout/Layout.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import socketApi from './socketApi';\n\nclass MediasoupApi {\n  constructor() {\n    this.initialized = false;\n    this.roomId = null;\n    this.onTrackCallbacks = new Map();\n  }\n\n  // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏\n  async init(roomId) {\n    console.log('MediasoupApi: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞');\n    this.roomId = roomId;\n    this.initialized = true;\n    return true;\n  }\n\n  // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞\n  async getLocalStream() {\n    console.log('MediasoupApi: –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–æ');\n    return null;\n  }\n\n  // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞\n  async publishStream() {\n    console.log('MediasoupApi: –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞');\n    return true;\n  }\n\n  // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–ª–±—ç–∫–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞\n  setOnTrackCallback(peerId, callback) {\n    this.onTrackCallbacks.set(peerId, callback);\n  }\n\n  // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞\n  async updateStreamStatus() {\n    console.log('MediasoupApi: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–µ–¥–∏–∞ –æ—Ç–∫–ª—é—á–µ–Ω–æ');\n    return true;\n  }\n\n  // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä\n  async request(type, data = {}) {\n    return new Promise((resolve) => {\n      try {\n        socketApi.emit(type, data, (response) => {\n          if (!response) {\n            console.warn(`–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ ${type}`);\n            resolve({});\n            return;\n          }\n          resolve(response);\n        });\n      } catch (error) {\n        console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ ${type}:`, error);\n        resolve({ error: error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞' });\n      }\n    });\n  }\n\n  // –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤\n  cleanup() {\n    console.log('MediasoupApi: –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤');\n    this.initialized = false;\n    this.roomId = null;\n    this.onTrackCallbacks.clear();\n  }\n}\n\nconst mediasoupApi = new MediasoupApi();\nexport default mediasoupApi; ","import { io } from 'socket.io-client';\nimport mediasoupApi from './mediasoupApi';\n\nclass SocketApi {\n  constructor() {\n    this.socket = null;\n    this.socketId = null;\n    this.connected = false;\n    this.listeners = new Map();\n    this.serverUrl = import.meta.env.VITE_API_URL || 'http://localhost:3002';\n    this.connectionAttempts = 0;\n    this.maxConnectionAttempts = 5;\n  }\n\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∫–µ—Ç–∞\n  init(serverUrl = null) {\n    if (this.socket && this.connected) {\n      console.log('–°–æ–∫–µ—Ç —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω');\n      return this.socket;\n    }\n    \n    // –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω URL, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ\n    if (serverUrl) {\n      this.serverUrl = serverUrl;\n    }\n    \n    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∫–µ—Ç–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫:', this.serverUrl);\n    \n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º\n    this.checkServerAvailability()\n      .then(available => {\n        if (!available) {\n          console.warn('–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');\n        }\n      })\n      .catch(err => {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:', err);\n      });\n    \n    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ\n    try {\n      // –ï—Å–ª–∏ –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ\n      if (this.socket) {\n        console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–æ–∫–µ—Ç');\n        this.socket.disconnect();\n        this.socket = null;\n      }\n      \n      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–æ–∫–µ—Ç\n      this.socket = io(this.serverUrl, {\n        transports: ['websocket', 'polling'],\n        timeout: 20000,\n        reconnection: true,\n        reconnectionAttempts: 5,\n        reconnectionDelay: 1000,\n        reconnectionDelayMax: 5000,\n        autoConnect: true,\n        path: '/socket.io/',\n        forceNew: true,\n        multiplex: false,\n        upgrade: true,\n        rememberUpgrade: true,\n        secure: true,\n        rejectUnauthorized: false,\n        withCredentials: true,\n        extraHeaders: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n      \n      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n      this.socket.on('connect', () => {\n        console.log('–°–æ–∫–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω, ID:', this.socket.id);\n        this.connected = true;\n        this.socketId = this.socket.id;\n        this.connectionAttempts = 0;\n      });\n      \n      this.socket.on('connect_error', (error) => {\n        console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', error);\n        this.connected = false;\n        this.connectionAttempts++;\n        \n        if (this.connectionAttempts <= this.maxConnectionAttempts) {\n          console.log(`–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ${this.connectionAttempts} –∏–∑ ${this.maxConnectionAttempts}...`);\n          setTimeout(() => {\n            this.socket.connect();\n          }, 1000 * this.connectionAttempts);\n        } else {\n          console.error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è');\n          alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');\n        }\n      });\n      \n      this.socket.on('disconnect', (reason) => {\n        console.log('–°–æ–∫–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω, –ø—Ä–∏—á–∏–Ω–∞:', reason);\n        this.connected = false;\n      });\n      \n      this.socket.on('reconnect', (attemptNumber) => {\n        console.log('–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –ø–æ–ø—ã—Ç–∫–∞ #', attemptNumber);\n        this.connected = true;\n      });\n      \n      this.socket.on('reconnect_error', (error) => {\n        console.error('–û—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', error);\n      });\n      \n      this.socket.on('reconnect_failed', () => {\n        console.error('–í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ —É–¥–∞–ª–∏—Å—å');\n      });\n      \n      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–º–Ω–∞—Ç—ã\n      this.socket.on('room-updated', (data) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:', data);\n      });\n      \n      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–∏–¥–µ–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n      this.socket.on('player-joined-video', ({ roomId, playerId }) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∏–¥–µ–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç:', playerId, '–¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:', roomId);\n        // –≠–º–∏—Ç–∏–º —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è –Ω–∞—à–µ–≥–æ videoApi\n        this.socket.emit('player-joined', playerId);\n      });\n      \n      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ WebRTC\n      this.socket.on('signal', ({ from, signal }) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω WebRTC —Å–∏–≥–Ω–∞–ª –æ—Ç:', from);\n        this.trigger('signal', { from, signal });\n      });\n      \n      // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ\n      this.socket.on('all-players', (players) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ:', players);\n        this.trigger('all-players', players);\n      });\n      \n      // –û–±—Ä–∞–±–æ—Ç–∫–∞ WebRTC —Å–∏–≥–Ω–∞–ª–æ–≤\n      this.socket.on('webrtc-offer', async ({ offer, from }) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ WebRTC –æ—Ç:', from);\n        try {\n          const answer = await mediasoupApi.handleOffer(from, offer);\n          console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ WebRTC –∫:', from);\n          this.socket.emit('webrtc-answer', { answer, to: from });\n        } catch (error) {\n          console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è WebRTC:', error);\n          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ\n          this.socket.emit('webrtc-error', { \n            to: from, \n            error: '–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ' \n          });\n        }\n      });\n\n      this.socket.on('webrtc-answer', async ({ answer, from }) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç WebRTC –æ—Ç:', from);\n        try {\n          await mediasoupApi.handleAnswer(from, answer);\n          console.log('–û—Ç–≤–µ—Ç WebRTC —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Ç:', from);\n        } catch (error) {\n          console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ WebRTC:', error);\n          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ\n          this.socket.emit('webrtc-error', { \n            to: from, \n            error: '–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ' \n          });\n        }\n      });\n\n      this.socket.on('webrtc-ice-candidate', async ({ candidate, from }) => {\n        console.log('–ü–æ–ª—É—á–µ–Ω ICE –∫–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç:', from);\n        try {\n          await mediasoupApi.handleIceCandidate(from, candidate);\n          console.log('ICE –∫–∞–Ω–¥–∏–¥–∞—Ç —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Ç:', from);\n        } catch (error) {\n          console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:', error);\n        }\n      });\n\n      this.socket.on('webrtc-error', ({ error, from }) => {\n        console.error('–ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ WebRTC –æ—Ç:', from, error);\n        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ UI\n      });\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–∫–µ—Ç–∞:', error);\n      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');\n    }\n    \n    return this.socket;\n  }\n\n  // –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞\n  async checkServerAvailability() {\n    try {\n      console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:', this.serverUrl);\n      \n      // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\n      if (this.connected && this.socket) {\n        console.log('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω');\n        return true;\n      }\n      \n      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\n      const timeout = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã\n      \n      try {\n        // –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Socket.IO –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\n        return new Promise((resolve) => {\n          // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\n          const testSocket = io(this.serverUrl, {\n            transports: ['websocket', 'polling'],\n            timeout: timeout,\n            reconnection: false,\n            forceNew: true\n          });\n          \n          // –£—Å—Ç–∞–Ω–æ–≤–∏–º —Ç–∞–π–º–∞—É—Ç –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n          const connectionTimeout = setTimeout(() => {\n            console.warn('–¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');\n            testSocket.disconnect();\n            resolve(false);\n          }, timeout);\n          \n          testSocket.on('connect', () => {\n            console.log('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n            clearTimeout(connectionTimeout);\n            testSocket.disconnect();\n            resolve(true);\n          });\n          \n          testSocket.on('connect_error', (error) => {\n            console.warn('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:', error);\n            clearTimeout(connectionTimeout);\n            testSocket.disconnect();\n            resolve(false);\n          });\n        });\n      } catch (error) {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:', error);\n        return false;\n      }\n    } catch (error) {\n      console.error('–û–±—â–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:', error);\n      return false;\n    }\n  }\n\n  // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã\n  createRoom(playerName) {\n    if (!this.connected || !this.socket) {\n      console.warn('–ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      return false;\n    }\n\n    this.socket.emit('create-room', { playerName });\n    return true;\n  }\n\n  // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ\n  joinRoom(roomCode, playerName) {\n    if (!this.connected || !this.socket) {\n      console.warn('–ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      return false;\n    }\n\n    this.socket.emit('join-room', { roomCode, playerName });\n    return true;\n  }\n\n  // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã\n  startGame(roomCode) {\n    if (!this.connected || !this.socket) {\n      console.warn('–ü–æ–ø—ã—Ç–∫–∞ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      return false;\n    }\n\n    this.socket.emit('start-game', { roomCode });\n    return true;\n  }\n\n  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤–∏–¥–µ–æ\n  updateVideoStatus(roomCode, enabled) {\n    if (!this.connected || !this.socket) {\n      console.warn('–ü–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–æ, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      return;\n    }\n\n    console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤–∏–¥–µ–æ: –∫–æ–º–Ω–∞—Ç–∞ ${roomCode}, –≤–∫–ª—é—á–µ–Ω–æ: ${enabled}`);\n    this.socket.emit('video-status', { roomCode, enabled });\n  }\n\n  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞\n  setCharacter(roomCode, targetPlayerId, character) {\n    if (!this.connected || !this.socket) {\n      console.warn('–ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      return false;\n    }\n\n    this.socket.emit('set-character', { roomCode, targetPlayerId, character });\n    return true;\n  }\n\n  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏—è\n  on(event, callback) {\n    if (!this.socket) {\n      this.init();\n    }\n\n    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –ø–æ–∑–∂–µ\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, []);\n    }\n    this.listeners.get(event).push(callback);\n\n    this.socket.on(event, callback);\n  }\n\n  // –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏—è\n  off(event, callback) {\n    if (!this.socket) {\n      return;\n    }\n\n    if (callback) {\n      this.socket.off(event, callback);\n      \n      // –£–¥–∞–ª—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑ —Å–ø–∏—Å–∫–∞\n      const callbacks = this.listeners.get(event) || [];\n      const index = callbacks.indexOf(callback);\n      if (index !== -1) {\n        callbacks.splice(index, 1);\n      }\n    } else {\n      // –£–¥–∞–ª—è–µ–º –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏—è\n      const callbacks = this.listeners.get(event) || [];\n      callbacks.forEach(cb => {\n        this.socket.off(event, cb);\n      });\n      this.listeners.delete(event);\n    }\n  }\n\n  // –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–ª—É—à–∞—Ç–µ–ª–µ–π\n  removeAllListeners() {\n    if (!this.socket) {\n      return;\n    }\n\n    this.listeners.forEach((callbacks, event) => {\n      callbacks.forEach(callback => {\n        this.socket.off(event, callback);\n      });\n    });\n\n    this.listeners.clear();\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n  isConnected() {\n    return this.connected;\n  }\n\n  // –ü–æ–ª—É—á–∏—Ç—å ID —Å–æ–∫–µ—Ç–∞ (ID –∏–≥—Ä–æ–∫–∞)\n  getSocketId() {\n    return this.socket?.id;\n  }\n\n  // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ\n  disconnect() {\n    if (!this.socket) {\n      return;\n    }\n\n    mediasoupApi.stopAllConnections();\n    mediasoupApi.stopLocalStream();\n    this.socket.disconnect();\n    this.socket = null;\n    this.connected = false;\n    this.socketId = null;\n    this.listeners.clear();\n  }\n\n  // –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã\n  leaveRoom(roomCode) {\n    if (!this.connected || !this.socket) {\n      return;\n    }\n\n    this.socket.emit('leave-room', { roomCode });\n  }\n\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ\n  getPlayers(roomCode) {\n    if (!this.connected || !this.socket) {\n      console.warn('–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      return false;\n    }\n    \n    this.socket.emit('get-players', { roomCode });\n    return true;\n  }\n\n  // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä\n  emit(eventName, data) {\n    if (!this.connected || !this.socket) {\n      console.warn(`–ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ ${eventName}, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ`);\n      return false;\n    }\n    \n    this.socket.emit(eventName, data);\n    return true;\n  }\n\n  // –ú–µ—Ç–æ–¥ –¥–ª—è –≤—ã–∑–æ–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π\n  trigger(event, data) {\n    if (!this.listeners.has(event)) return;\n    \n    const callbacks = this.listeners.get(event) || [];\n    callbacks.forEach(callback => {\n      try {\n        callback(data);\n      } catch (error) {\n        console.error(`–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–±—ã—Ç–∏—è ${event}:`, error);\n      }\n    });\n  }\n\n  // –ú–µ—Ç–æ–¥—ã –¥–ª—è WebRTC\n  async initiateWebRTCConnection(targetId) {\n    try {\n      const offer = await mediasoupApi.createOffer(targetId);\n      this.socket.emit('webrtc-offer', { offer, to: targetId });\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:', error);\n    }\n  }\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞\n  onPlayerJoined(callback) {\n    this.socket.on('player-joined', async (data) => {\n      console.log('–ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è:', data);\n      try {\n        // –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –∏–≥—Ä–æ–∫–æ–º\n        await this.initiateWebRTCConnection(data.playerId);\n        console.log('WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ —Å:', data.playerId);\n        callback(data);\n      } catch (error) {\n        console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:', error);\n      }\n    });\n  }\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞\n  onPlayerLeft(callback) {\n    this.socket.on('player-left', (data) => {\n      console.log('–ò–≥—Ä–æ–∫ –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É:', data);\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\n      mediasoupApi.closeConnection(data.playerId);\n      console.log('WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ —Å:', data.playerId);\n      callback(data);\n    });\n  }\n\n  // –û—Ç–ø—Ä–∞–≤–∫–∞ WebRTC –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è\n  sendWebRTCOffer(peerId, offer) {\n    if (!this.socket || !this.connected) {\n      console.error('–°–æ–∫–µ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω');\n      return;\n    }\n    console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è WebRTC –∫:', peerId);\n    this.socket.emit('webrtc-offer', {\n      to: peerId,\n      offer\n    });\n  }\n\n  // –û—Ç–ø—Ä–∞–≤–∫–∞ WebRTC –æ—Ç–≤–µ—Ç–∞\n  sendWebRTCAnswer(peerId, answer) {\n    if (!this.socket || !this.connected) {\n      console.error('–°–æ–∫–µ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω');\n      return;\n    }\n    console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ WebRTC –∫:', peerId);\n    this.socket.emit('webrtc-answer', {\n      to: peerId,\n      answer\n    });\n  }\n\n  // –û—Ç–ø—Ä–∞–≤–∫–∞ WebRTC ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞\n  sendWebRTCIceCandidate(peerId, candidate) {\n    if (!this.socket || !this.connected) {\n      console.error('–°–æ–∫–µ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω');\n      return;\n    }\n    console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∫:', peerId);\n    this.socket.emit('webrtc-ice-candidate', {\n      to: peerId,\n      candidate\n    });\n  }\n\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ WebRTC –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è\n  onWebRTCOffer(callback) {\n    this.socket.on('webrtc-offer', async ({ from, offer }) => {\n      try {\n        const peerConnection = await mediasoupApi.createPeerConnection(from);\n        await peerConnection.setRemoteDescription(new RTCSessionDescription(offer));\n        const answer = await peerConnection.createAnswer();\n        await peerConnection.setLocalDescription(answer);\n        this.sendWebRTCAnswer(from, answer);\n      } catch (error) {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebRTC –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:', error);\n      }\n    });\n  }\n\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ WebRTC –æ—Ç–≤–µ—Ç–∞\n  onWebRTCAnswer(callback) {\n    this.socket.on('webrtc-answer', async ({ from, answer }) => {\n      try {\n        const peerConnection = mediasoupApi.getPeerConnection(from);\n        if (peerConnection) {\n          await peerConnection.setRemoteDescription(new RTCSessionDescription(answer));\n        }\n      } catch (error) {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebRTC –æ—Ç–≤–µ—Ç–∞:', error);\n      }\n    });\n  }\n\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ WebRTC ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞\n  onWebRTCIceCandidate(callback) {\n    this.socket.on('webrtc-ice-candidate', async ({ from, candidate }) => {\n      try {\n        const peerConnection = mediasoupApi.getPeerConnection(from);\n        if (peerConnection) {\n          await peerConnection.addIceCandidate(new RTCIceCandidate(candidate));\n        }\n      } catch (error) {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebRTC ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:', error);\n      }\n    });\n  }\n\n  // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ WebRTC –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤\n  offWebRTCOffer(callback) {\n    if (!this.socket) return;\n    this.socket.off('webrtc-offer', callback);\n  }\n\n  offWebRTCAnswer(callback) {\n    if (!this.socket) return;\n    this.socket.off('webrtc-answer', callback);\n  }\n\n  offWebRTCIceCandidate(callback) {\n    if (!this.socket) return;\n    this.socket.off('webrtc-ice-candidate', callback);\n  }\n\n  offPlayerJoined(callback) {\n    if (!this.socket) return;\n    this.socket.off('player-joined', callback);\n  }\n\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–∫–µ—Ç–∞\n  getSocketState() {\n    if (!this.socket) {\n      return {\n        connected: false,\n        connectionState: 'closed',\n        id: null,\n        transportType: null\n      };\n    }\n    \n    return {\n      connected: this.socket.connected,\n      connectionState: this.socket.connected ? 'connected' : (this.socket.disconnected ? 'disconnected' : 'connecting'),\n      id: this.socket.id,\n      transportType: this.socket.io?.engine?.transport?.name || null\n    };\n  }\n  \n  // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–æ–∫–µ—Ç–∞ –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å\n  getSocketStateString() {\n    const state = this.getSocketState();\n    return `–°–æ–∫–µ—Ç: ${state.connectionState} (ID: ${state.id || '–Ω–µ—Ç'}, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç: ${state.transportType || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'})`;\n  }\n  \n  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–∫–µ—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª—å\n  logSocketState() {\n    console.log(this.getSocketStateString());\n    return this.getSocketState();\n  }\n}\n\n// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–∏–Ω–≥–ª—Ç–æ–Ω\nexport default new SocketApi(); ","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './HomePage.module.css';\r\nimport socketApi from '@/shared/api/socketApi';\r\n\r\nexport const HomePage = () => {\r\n  const [name, setName] = useState('');\r\n  const [roomCode, setRoomCode] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∫–µ—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã\r\n  useEffect(() => {\r\n    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\r\n    const socket = socketApi.init();\r\n    \r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\r\n    const checkConnection = () => {\r\n      const connected = socketApi.isConnected();\r\n      setIsConnected(connected);\r\n      if (!connected) {\r\n        console.log('–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...');\r\n        setError('–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.');\r\n      } else {\r\n        setError('');\r\n      }\r\n    };\r\n    \r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ä–∞–∑—É\r\n    checkConnection();\r\n    \r\n    // –ò –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\r\n    const connectionTimer = setInterval(checkConnection, 3000);\r\n\r\n    // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã\r\n    socketApi.on('room-created', (data) => {\r\n      setIsLoading(false);\r\n      console.log('–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞:', data);\r\n      \r\n      if (data.success) {\r\n        // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã\r\n        navigate(`/game?name=${encodeURIComponent(name)}&room=${encodeURIComponent(data.roomCode)}&host=true`);\r\n      } else {\r\n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏\r\n        setError(data.error || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É');\r\n      }\r\n    });\r\n\r\n    // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫–æ–º–Ω–∞—Ç–µ\r\n    socketApi.on('room-joined', (data) => {\r\n      setIsLoading(false);\r\n      console.log('–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ:', data);\r\n      \r\n      if (data.success) {\r\n        // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã\r\n        navigate(`/game?name=${encodeURIComponent(name)}&room=${encodeURIComponent(roomCode)}`);\r\n      } else {\r\n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É\r\n        setError(data.error || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ');\r\n      }\r\n    });\r\n\r\n    // –°–ª—É—à–∞–µ–º –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\r\n    socketApi.on('connect_error', (err) => {\r\n      console.error('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è Socket.IO:', err);\r\n      setError(`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ${err.message}`);\r\n      setIsLoading(false);\r\n    });\r\n\r\n    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n    return () => {\r\n      clearInterval(connectionTimer);\r\n      socketApi.off('room-created');\r\n      socketApi.off('room-joined');\r\n      socketApi.off('connect_error');\r\n    };\r\n  }, [navigate, name, roomCode]);\r\n\r\n  const handleCreateRoom = () => {\r\n    if (!isConnected) {\r\n      setError('–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');\r\n      return;\r\n    }\r\n\r\n    if (!name.trim()) {\r\n      setError('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è');\r\n      return;\r\n    }\r\n\r\n    setError('');\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:', name);\r\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã\r\n      socketApi.createRoom(name);\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã:', err);\r\n      setError(`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ${err.message}`);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleJoinRoom = () => {\r\n    if (!isConnected) {\r\n      setError('–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');\r\n      return;\r\n    }\r\n\r\n    if (!name.trim()) {\r\n      setError('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è');\r\n      return;\r\n    }\r\n\r\n    if (!roomCode.trim()) {\r\n      setError('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã');\r\n      return;\r\n    }\r\n\r\n    setError('');\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ:', roomCode, name);\r\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ\r\n      socketApi.joinRoom(roomCode, name);\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∫ –∫–æ–º–Ω–∞—Ç–µ:', err);\r\n      setError(`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ${err.message}`);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.homePage}>\r\n      <div className={styles.container}>\r\n        <h1 className={styles.title}>Who Am I?</h1>\r\n        <p className={styles.subtitle}>A fun game to play with your friends</p>\r\n        \r\n        {!isConnected && (\r\n          <div className={styles.connectionStatus}>\r\n            Connecting to server...\r\n          </div>\r\n        )}\r\n        \r\n        {error && <div className={styles.errorMessage}>{error}</div>}\r\n        \r\n        <div className={`${styles.formGroup} ${styles.nameInput}`}>\r\n          <input\r\n            type=\"text\"\r\n            className={styles.input}\r\n            placeholder=\"Enter name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            disabled={isLoading || !isConnected}\r\n          />\r\n        </div>\r\n        \r\n        <div className={styles.formGroup}>\r\n          <button \r\n            className={styles.createButton}\r\n            onClick={handleCreateRoom}\r\n            disabled={isLoading || !isConnected}\r\n          >\r\n            {isLoading ? 'Creating...' : 'Create room'}\r\n          </button>\r\n        </div>\r\n        \r\n        <div className={styles.divider}>or</div>\r\n        \r\n        <div className={styles.formGroup}>\r\n          <input\r\n            type=\"text\"\r\n            className={styles.input}\r\n            placeholder=\"Room code\"\r\n            value={roomCode}\r\n            onChange={(e) => setRoomCode(e.target.value.toUpperCase())}\r\n            disabled={isLoading || !isConnected}\r\n          />\r\n        </div>\r\n        \r\n        <div className={styles.formGroup}>\r\n          <button \r\n            className={styles.joinButton}\r\n            onClick={handleJoinRoom}\r\n            disabled={isLoading || !isConnected}\r\n          >\r\n            {isLoading ? 'Joining...' : 'Join'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// –ü—Ä–æ–≤–µ—Ä–∫–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ª–∏ —É–∂–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã\nif (typeof global === 'undefined') {\n  window.global = window;\n}\n\nif (typeof process === 'undefined' || !process.browser) {\n  window.process = window.process || {};\n  window.process.browser = true;\n  window.process.env = window.process.env || {};\n}\n\nif (typeof Buffer === 'undefined') {\n  window.Buffer = window.Buffer || {\n    from: (arr) => new Uint8Array(arr),\n    alloc: (size) => new Uint8Array(size),\n    allocUnsafe: (size) => new Uint8Array(size),\n    isBuffer: () => false\n  };\n}\n\nimport socketApi from './socketApi';\nimport Peer from 'simple-peer';\n\n// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è VideoApi —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º WebRTC –∏ simple-peer\nclass VideoApi {\n  constructor() {\n    this.peers = {};\n    this.connectedPlayers = new Set();\n    this.localStream = null;\n    this.onRemoteStream = null;\n    this.onRemoteStreamRemoved = null;\n    this.myPlayerId = null;\n    this.roomId = null;\n    this.initialized = false;\n    this.animationFrames = [];\n    this.canvasStreams = {};\n  }\n\n  // –°–æ–∑–¥–∞–Ω–∏–µ WebRTC –ø–∏—Ä–∞\n  createPeer(playerId, initiator, initialSignal = null) {\n    console.log(`–°–æ–∑–¥–∞–Ω–∏–µ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å ${playerId} (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä: ${initiator})`);\n    \n    if (this.peers[playerId]) {\n      console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å ${playerId} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`);\n      return;\n    }\n\n    const options = {\n      initiator,\n      trickle: false,\n      stream: this.localStream,\n      config: {\n        iceServers: [\n          { urls: 'stun:stun1.l.google.com:19302' },\n          { urls: 'stun:stun2.l.google.com:19302' },\n          { urls: 'stun:stun3.l.google.com:19302' },\n          { urls: 'stun:stun4.l.google.com:19302' },\n          { urls: 'stun:stun5.l.google.com:19302' },\n          { urls: 'stun:stun6.l.google.com:19302' },\n          { urls: 'stun:stun7.l.google.com:19302' },\n          { urls: 'stun:stun8.l.google.com:19302' },\n          { urls: 'stun:stun9.l.google.com:19302' },\n          { urls: 'stun:stun10.l.google.com:19302' },\n          { urls: 'stun:stun11.l.google.com:19302' },\n          { urls: 'stun:stun12.l.google.com:19302' },\n          { urls: 'stun:stun13.l.google.com:19302' },\n          { urls: 'stun:stun14.l.google.com:19302' },\n          { urls: 'stun:stun15.l.google.com:19302' },\n          { urls: 'stun:stun16.l.google.com:19302' },\n          { urls: 'stun:stun17.l.google.com:19302' },\n          { urls: 'stun:stun18.l.google.com:19302' },\n          { urls: 'stun:stun19.l.google.com:19302' },\n          { urls: 'stun:stun20.l.google.com:19302' }\n        ],\n        iceTransportPolicy: 'all',\n        iceCandidatePoolSize: 10\n      }\n    };\n    \n    try {\n      const peer = new Peer(options);\n      \n      peer.on('error', (err) => {\n        console.error(`–û—à–∏–±–∫–∞ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å ${playerId}:`, err);\n        this.handlePeerError(playerId, err);\n      });\n\n      peer.on('connect', () => {\n        console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å ${playerId}`);\n        this.connectedPlayers.add(playerId);\n        \n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n        if (this.localStream) {\n          const videoTrack = this.localStream.getVideoTracks()[0];\n          if (videoTrack) {\n            console.log(`–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –¥–ª—è ${playerId}:`, {\n              enabled: videoTrack.enabled,\n              readyState: videoTrack.readyState,\n              muted: videoTrack.muted\n            });\n          }\n        }\n      });\n\n      peer.on('close', () => {\n        console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ —Å ${playerId}`);\n        this.handlePeerClose(playerId);\n      });\n\n      peer.on('stream', (stream) => {\n        console.log(`–ü–æ–ª—É—á–µ–Ω –ø–æ—Ç–æ–∫ –æ—Ç ${playerId}`);\n        if (this.onRemoteStream) {\n          stream.playerId = playerId;\n          \n          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞\n          const videoTrack = stream.getVideoTracks()[0];\n          if (videoTrack) {\n            console.log(`–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –æ—Ç ${playerId}:`, {\n              enabled: videoTrack.enabled,\n              readyState: videoTrack.readyState,\n              muted: videoTrack.muted\n            });\n          }\n          \n          this.onRemoteStream(playerId, stream);\n        }\n      });\n\n      peer.on('signal', (signal) => {\n        console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –∫ ${playerId}`);\n        socketApi.emit('signal', { to: playerId, signal });\n      });\n\n      if (!initiator && initialSignal) {\n        peer.signal(initialSignal);\n      }\n\n      this.peers[playerId] = peer;\n      return peer;\n    } catch (error) {\n      console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∏—Ä–∞ –¥–ª—è ${playerId}:`, error);\n      this.handlePeerError(playerId, error);\n    }\n  }\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∏—Ä–∞\n  handlePeerError(playerId, error) {\n    if (this.peers[playerId]) {\n      this.peers[playerId].destroy();\n      delete this.peers[playerId];\n    }\n    this.connectedPlayers.delete(playerId);\n    \n    if (this.onRemoteStreamRemoved) {\n      this.onRemoteStreamRemoved(playerId);\n    }\n  }\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∏—Ä–∞\n  handlePeerClose(playerId) {\n    delete this.peers[playerId];\n    this.connectedPlayers.delete(playerId);\n    \n    if (this.onRemoteStreamRemoved) {\n      this.onRemoteStreamRemoved(playerId);\n    }\n  }\n\n  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –∏–∑ –∫–∞–Ω–≤–∞—Å–∞\n  async createCanvasStream() {\n    const canvas = document.createElement('canvas');\n    canvas.width = 640;\n    canvas.height = 480;\n    const ctx = canvas.getContext('2d');\n    \n    let hue = 0;\n    const text = '–ù–µ—Ç –∫–∞–º–µ—Ä—ã';\n    \n    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏\n    const animate = () => {\n      // –û—á–∏—Å—Ç–∫–∞ –∫–∞–Ω–≤–∞—Å–∞\n      ctx.fillStyle = '#1a1625';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      \n      // –†–∏—Å—É–µ–º –ø—É–ª—å—Å–∏—Ä—É—é—â—É—é —Ä–∞–º–∫—É\n      const borderWidth = 4;\n      ctx.strokeStyle = `hsl(${hue}, 70%, 60%)`;\n      ctx.lineWidth = borderWidth;\n      ctx.strokeRect(borderWidth/2, borderWidth/2, \n                    canvas.width - borderWidth, \n                    canvas.height - borderWidth);\n      \n      // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç\n      hue = (hue + 1) % 360;\n      \n      // –†–∏—Å—É–µ–º —Ç–µ–∫—Å—Ç\n      ctx.font = '48px Arial';\n      ctx.fillStyle = '#ffffff';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(text, canvas.width/2, canvas.height/2);\n      \n      // –†–∏—Å—É–µ–º –∏–∫–æ–Ω–∫—É –∫–∞–º–µ—Ä—ã\n      ctx.font = '36px Arial';\n      ctx.fillText('üé•', canvas.width/2, canvas.height/2 - 60);\n      \n      const animFrameId = requestAnimationFrame(animate);\n      this.animationFrames.push(animFrameId);\n    };\n    \n    animate();\n    \n    const stream = canvas.captureStream(30);\n    stream.isCanvasStream = true;\n    return stream;\n  }\n\n  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–∫–µ—Ç–æ–≤ –∏ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π\n  setupSocketListeners(roomId) {\n    // –û—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–ª—É—à–∞—Ç–µ–ª–µ–π\n    socketApi.off('signal');\n    socketApi.off('player-joined');\n    socketApi.off('player-left');\n    socketApi.off('all-players');\n    \n    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ\n    socketApi.emit('join-room', { roomId });\n    \n    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ –∏ —Å–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n    socketApi.on('all-players', (players) => {\n      console.log('–ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ:', players);\n      players.forEach(playerId => {\n        if (playerId !== this.myPlayerId && !this.connectedPlayers.has(playerId)) {\n          console.log(`–°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –∏–≥—Ä–æ–∫–æ–º ${playerId}`);\n          this.createPeer(playerId, true);\n        }\n      });\n    });\n    \n    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞\n    socketApi.on('player-joined', (playerId) => {\n      console.log('–ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è:', playerId);\n      if (playerId !== this.myPlayerId && !this.connectedPlayers.has(playerId)) {\n        console.log(`–°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –∏–≥—Ä–æ–∫–æ–º ${playerId}`);\n        this.createPeer(playerId, false);\n      }\n    });\n    \n    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞\n    socketApi.on('player-left', (playerId) => {\n      console.log('–ò–≥—Ä–æ–∫ –≤—ã—à–µ–ª:', playerId);\n      this.connectedPlayers.delete(playerId);\n      \n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\n      if (this.peers[playerId]) {\n        this.peers[playerId].destroy();\n        delete this.peers[playerId];\n      }\n      \n      // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ—Ç–æ–∫–∞\n      if (this.onRemoteStreamRemoved) {\n        this.onRemoteStreamRemoved(playerId);\n      }\n    });\n    \n    // –û–±—Ä–∞–±–æ—Ç–∫–∞ WebRTC —Å–∏–≥–Ω–∞–ª–æ–≤\n    socketApi.on('signal', ({ from, signal }) => {\n      console.log('–ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –æ—Ç:', from);\n      \n      // –ï—Å–ª–∏ —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —ç—Ç–∏–º –∏–≥—Ä–æ–∫–æ–º\n      if (this.peers[from]) {\n        if (this.peers[from].connected) {\n          try {\n            console.log(`–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å ${from}`);\n            this.peers[from].signal(signal);\n          } catch (err) {\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–∏–≥–Ω–∞–ª–∞:', err);\n            // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –ø–∏—Ä –ø—Ä–∏ –æ—à–∏–±–∫–µ\n            this.handlePeerError(from, err);\n            this.createPeer(from, false, signal);\n          }\n        } else {\n          console.warn('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å', from, '–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–æ. –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.');\n          this.createPeer(from, false, signal);\n        }\n      } else {\n        console.warn('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å', from, '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.');\n        this.createPeer(from, false, signal);\n      }\n    });\n  }\n  \n  // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ\n  toggleVideo(enabled) {\n    if (this.localStream) {\n      const videoTracks = this.localStream.getVideoTracks();\n      if (videoTracks.length > 0) {\n        videoTracks.forEach(track => {\n          track.enabled = enabled;\n        });\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞\n  toggleAudio(enabled) {\n    if (this.localStream) {\n      const audioTracks = this.localStream.getAudioTracks();\n      if (audioTracks.length > 0) {\n        audioTracks.forEach(track => {\n          track.enabled = enabled;\n        });\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–º–µ—Ä—ã\n  isVideoEnabled() {\n    return this.localStream && this.localStream.getVideoTracks().length > 0;\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞\n  isAudioEnabled() {\n    return this.localStream && this.localStream.getAudioTracks().length > 0;\n  }\n\n  // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π\n  stop() {\n    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫\n    if (this.localStream) {\n      this.localStream.getTracks().forEach(track => track.stop());\n      this.localStream = null;\n    }\n    \n    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n    Object.values(this.peers).forEach(peer => {\n      if (peer && typeof peer.destroy === 'function') {\n        peer.destroy();\n      }\n    });\n    this.peers = {};\n    \n    // –û—á–∏—â–∞–µ–º –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏\n    socketApi.off('signal');\n    socketApi.off('player-joined');\n    socketApi.off('player-left');\n    socketApi.off('all-players');\n    \n    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∞–Ω–∏–º–∞—Ü–∏–π\n    this.animationFrames.forEach(id => {\n      cancelAnimationFrame(id);\n    });\n    this.animationFrames = [];\n    \n    // –£–¥–∞–ª–µ–Ω–∏–µ canvas —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n    const canvasElements = document.querySelectorAll('canvas[id^=\"canvas-\"]');\n    canvasElements.forEach(canvas => {\n      canvas.remove();\n    });\n    \n    // –û—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∏\n    this.canvasStreams = {};\n    \n    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n    this.initialized = false;\n    this.connectedPlayers.clear();\n    this.roomId = null;\n  }\n  \n  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Ç–æ–∫–µ\n  getStreamInfo(stream) {\n    if (!stream) return null;\n    \n    return {\n      isCanvas: stream.isCanvasStream || false,\n      canvasId: stream.canvasId || null,\n      videoTracks: stream.getVideoTracks().length,\n      audioTracks: stream.getAudioTracks().length\n    };\n  }\n\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API\n  async init(roomId) {\n    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Video API —Å WebRTC –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:', roomId);\n    this.roomId = roomId;\n    \n    // –°–Ω–∞—á–∞–ª–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã\n    if (this.localStream) {\n      this.localStream.getTracks().forEach(track => track.stop());\n      this.localStream = null;\n    }\n    \n    let retryCount = 0;\n    const maxRetries = 3;\n    \n    while (retryCount < maxRetries) {\n      try {\n        console.log(`–ü–æ–ø—ã—Ç–∫–∞ ${retryCount + 1}/${maxRetries} –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å –∫–∞–º–µ—Ä—ã...`);\n        \n        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ, –µ—Å–ª–∏ –∞—É–¥–∏–æ –Ω–µ –Ω—É–∂–µ–Ω\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: { ideal: 640 },\n            height: { ideal: 480 },\n            frameRate: { ideal: 30 }\n          },\n          audio: false // –û—Ç–∫–ª—é—á–∞–µ–º –∞—É–¥–∏–æ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è\n        });\n        \n        console.log('–ú–µ–¥–∏–∞–ø–æ—Ç–æ–∫ –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ: –≤–∏–¥–µ–æ —Ç—Ä–µ–∫–æ–≤:', stream.getVideoTracks().length, \n                    ', –∞—É–¥–∏–æ —Ç—Ä–µ–∫–æ–≤:', stream.getAudioTracks().length);\n        \n        const videoTrack = stream.getVideoTracks()[0];\n        console.log('–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞:', videoTrack.getSettings());\n        \n        this.localStream = stream;\n        break;\n      } catch (error) {\n        console.error(`–ü–æ–ø—ã—Ç–∫–∞ ${retryCount + 1}/${maxRetries} –Ω–µ —É–¥–∞–ª–∞—Å—å:`, error);\n        \n        if (error.name === 'NotReadableError' && retryCount < maxRetries - 1) {\n          console.log('–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–æ, –∂–¥–µ–º 2 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π...');\n          await new Promise(resolve => setTimeout(resolve, 2000));\n          retryCount++;\n          continue;\n        }\n        \n        console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å –∫–∞–º–µ—Ä—ã:', error);\n        console.log('–°–æ–∑–¥–∞–µ–º –ø–æ—Ç–æ–∫ –∏–∑ –∫–∞–Ω–≤–∞—Å–∞ –≤–º–µ—Å—Ç–æ –∫–∞–º–µ—Ä—ã');\n        this.localStream = await this.createCanvasStream();\n        break;\n      }\n    }\n\n    this.initialized = true;\n    return this.localStream;\n  }\n}\n\nconst videoApi = new VideoApi();\nexport default videoApi; ","import React, { useEffect, useRef, useState } from 'react';\nimport styles from './GamePage.module.css';\nimport videoApi from '../../shared/api/videoApi';\n\nconst PlayerVideo = ({ \n  stream, \n  playerId, \n  playerName, \n  character, \n  isCurrentPlayer, \n  isVideoEnabled = true, \n  isAudioEnabled = true, \n  muted \n}) => {\n  const videoRef = useRef(null);\n  const [hasVideo, setHasVideo] = useState(false);\n  const [videoError, setVideoError] = useState(null);\n  const [videoStatus, setVideoStatus] = useState('connecting'); // 'connecting', 'active', 'error'\n\n  useEffect(() => {\n    console.log('PlayerVideo: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –¥–ª—è', playerId, stream ? `–í–∏–¥–µ–æ—Ç—Ä–µ–∫–æ–≤: ${stream.getVideoTracks().length}, –ê—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤: ${stream.getAudioTracks().length}` : '–Ω–µ—Ç –ø–æ—Ç–æ–∫–∞');\n    \n    if (!stream || !videoRef.current) {\n      console.log('–ù–µ—Ç –ø–æ—Ç–æ–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞', playerId, '–∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ—ç–ª–µ–º–µ–Ω—Ç');\n      return;\n    }\n\n    const videoElement = videoRef.current;\n    const videoTrack = stream.getVideoTracks()[0];\n    \n    if (videoTrack) {\n      console.log('–í–∏–¥–µ–æ—Ç—Ä–µ–∫ –¥–ª—è', playerId, ':', {\n        enabled: videoTrack.enabled,\n        active: videoTrack.active,\n        type: videoTrack.kind,\n        readyState: videoTrack.readyState,\n        muted: videoTrack.muted\n      });\n    }\n\n    // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–∏–¥–µ–æ\n    if (videoElement.srcObject) {\n      console.log('–û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–∏–¥–µ–æ –¥–ª—è', playerId);\n      videoElement.srcObject = null;\n    }\n\n    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫\n    videoElement.srcObject = stream;\n    \n    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π\n    const handlePlay = () => {\n      console.log('–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –¥–ª—è', playerId);\n    };\n\n    const handleError = (error) => {\n      console.error('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ:', error);\n      // –ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ\n      setTimeout(() => {\n        if (videoElement.paused) {\n          console.log('–ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è', playerId);\n          videoElement.play().catch(err => {\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', err);\n          });\n        }\n      }, 1000);\n    };\n\n    const handleLoadedMetadata = () => {\n      console.log('–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–ª—è', playerId);\n      // –ü—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ\n      videoElement.play().catch(err => {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', err);\n      });\n    };\n\n    videoElement.addEventListener('play', handlePlay);\n    videoElement.addEventListener('error', handleError);\n    videoElement.addEventListener('loadedmetadata', handleLoadedMetadata);\n\n    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n    return () => {\n      console.log('–û—á–∏—Å—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ PlayerVideo –¥–ª—è', playerId);\n      videoElement.removeEventListener('play', handlePlay);\n      videoElement.removeEventListener('error', handleError);\n      videoElement.removeEventListener('loadedmetadata', handleLoadedMetadata);\n      \n      if (videoElement.srcObject) {\n        videoElement.srcObject.getTracks().forEach(track => track.stop());\n        videoElement.srcObject = null;\n      }\n    };\n  }, [stream, playerId]);\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ\n  const handleVideoError = (error) => {\n    console.error(`–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ –¥–ª—è ${playerId}:`, error);\n    setVideoError(error.message || '–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ');\n    setHasVideo(false);\n    setVideoStatus('error');\n  };\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ\n  const handleVideoPlay = () => {\n    console.log(`–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –¥–ª—è ${playerId}`);\n    setVideoStatus('active');\n    setHasVideo(true);\n  };\n\n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –≤–∏–¥–µ–æ\n  const showVideo = stream && \n    (hasVideo || stream.getVideoTracks().length > 0 || stream.isCanvasStream);\n\n  return (\n    <div className={styles.playerVideoContainer}>\n      {stream ? (\n        <div className={styles.videoWrapper}>\n          <video\n            ref={videoRef}\n            className={styles.playerVideo}\n            autoPlay\n            playsInline\n            muted={muted}\n            onError={handleVideoError}\n            onPlay={handleVideoPlay}\n          />\n          <div className={`${styles.videoStatus} ${styles[`videoStatus${videoStatus.charAt(0).toUpperCase() + videoStatus.slice(1)}`]}`}>\n            <span className={styles.streamIcon}>\n              {videoStatus === 'connecting' && '‚åõ'}\n              {videoStatus === 'active' && '‚úì'}\n              {videoStatus === 'error' && '‚úó'}\n            </span>\n          </div>\n        </div>\n      ) : (\n        <div className={styles.placeholderVideo}>\n          <div className={styles.placeholderContent}>\n            <span role=\"img\" aria-label=\"user\">üë§</span>\n            <div className={styles.noVideoText}>\n              {videoError ? '–û—à–∏–±–∫–∞ –≤–∏–¥–µ–æ' : '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...'}\n            </div>\n            <div className={styles.spinnerContainer}>\n              <div className={styles.spinner}></div>\n            </div>\n          </div>\n        </div>\n      )}\n      {!isVideoEnabled && stream && (\n        <div className={styles.videoDisabled}>\n          <span className={styles.noVideoIcon}>üé•</span>\n        </div>\n      )}\n      <div className={styles.playerInfo}>\n        <div className={styles.playerName}>\n          {playerName || `–ò–≥—Ä–æ–∫ ${playerId?.substring(0, 4) || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π'}`} {isCurrentPlayer && ' (–í—ã)'}\n        </div>\n        {character && (\n          <div className={styles.playerCharacter}>\n            –ü–µ—Ä—Å–æ–Ω–∞–∂: {isCurrentPlayer ? '???' : character}\n          </div>\n        )}\n        {!isAudioEnabled && (\n          <div className={styles.mediaControls}>\n            <span className={styles.mutedIcon}>üîá</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerVideo; ","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport styles from './GamePage.module.css';\nimport socketApi from '@/shared/api/socketApi';\nimport videoApi from '@/shared/api/videoApi';\nimport PlayerVideo from './PlayerVideo';\n\nexport const GamePage = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [error, setError] = useState('');\n  const [serverStatus, setServerStatus] = useState('connecting'); // 'connecting', 'connected', 'error'\n  const [notes, setNotes] = useState('');\n  const [editingCharacter, setEditingCharacter] = useState(null);\n  const [newCharacter, setNewCharacter] = useState('');\n  const [videoEnabled, setVideoEnabled] = useState(true);\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const localVideoRef = useRef(null);\n  const [remoteStreams, setRemoteStreams] = useState({});\n\n  const [gameState, setGameState] = useState({\n    roomCode: '',\n    players: [],\n    isHost: false,\n    playerName: '',\n    gameStarted: false,\n    playerId: '',\n    // –ö–∞—Ä—Ç–∞ –∫—Ç–æ –∫–æ–º—É –∑–∞–≥–∞–¥—ã–≤–∞–µ—Ç —Å–ª–æ–≤–∞ (playerId -> assignedToPlayerId)\n    characterAssignments: {},\n    // –ü–µ—Ä—Å–æ–Ω–∞–∂–∏, –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞–º\n    characters: {}\n  });\n\n  // –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –Ω–∞–≤–æ–¥—è—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤\n  const hintQuestions = [\n    \"–Ø —á–µ–ª–æ–≤–µ–∫?\",\n    \"–Ø –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂?\",\n    \"–Ø –∂–∏–≤—É –≤ –Ω–∞—à–µ –≤—Ä–µ–º—è?\",\n    \"–Ø –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å?\",\n    \"–Ø —Å–ø–æ—Ä—Ç—Å–º–µ–Ω?\",\n    \"–Ø –∞–∫—Ç–µ—Ä/–∞–∫—Ç—Ä–∏—Å–∞?\",\n    \"–Ø –º—É–∑—ã–∫–∞–Ω—Ç?\",\n    \"–Ø –ø–æ–ª–∏—Ç–∏–∫?\",\n    \"–Ø —Å—Ç–∞—Ä—à–µ 50 –ª–µ—Ç?\",\n    \"–Ø –º—É–∂—á–∏–Ω–∞?\",\n    \"–Ø –∂–µ–Ω—â–∏–Ω–∞?\"\n  ];\n\n  // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–Ω—è—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ\n  const getMediaErrorMessage = (error) => {\n    if (!error) {\n      return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∫–∞–º–µ—Ä–µ';\n    }\n    \n    switch(error.name) {\n      case 'NotAllowedError':\n        return '–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–ø—Ä–µ—â–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.';\n      case 'NotFoundError':\n        return '–ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.';\n      case 'NotReadableError':\n        return '–ö–∞–º–µ—Ä–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∫–∞–º–µ—Ä—É, –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.';\n      case 'OverconstrainedError':\n        return '–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –º–µ–Ω—å—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.';\n      case 'AbortError':\n        return '–û–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';\n      case 'SecurityError':\n        return '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞.';\n      case 'TypeError':\n        return '–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ.';\n      default:\n        return `–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∫–∞–º–µ—Ä–µ: ${error.message || error.name}`;\n    }\n  };\n\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const name = params.get('name');\n    const room = params.get('room');\n    const isHost = params.get('host') === 'true';\n\n    if (!name || !room) {\n      navigate('/');\n      return;\n    }\n\n    setGameState(prev => ({\n      ...prev,\n      playerName: name,\n      roomCode: room,\n      isHost: isHost\n    }));\n  }, [location.search, navigate]);\n\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∫–µ—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π\n  useEffect(() => {\n    if (!gameState.roomCode || !gameState.playerName) return;\n    \n    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–º–Ω–∞—Ç–æ–π:', gameState.roomCode);\n    setServerStatus('connecting');\n    \n    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\n    const socket = socketApi.init();\n    \n    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π\n    const handleRoomUpdated = (data) => {\n      console.log('–ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:', data);\n      \n      // –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–≥—Ä–æ–∫–æ–≤ –ø–æ ID\n      const uniquePlayers = data.players.filter(\n        (player, index, self) => index === self.findIndex(p => p.id === player.id)\n      );\n      \n      // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã\n      setGameState(prev => ({\n        ...prev,\n        players: uniquePlayers,\n        gameStarted: data.gameStarted || prev.gameStarted,\n        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\n        characterAssignments: data.characterAssignments || prev.characterAssignments,\n        characters: data.characters || prev.characters\n      }));\n    };\n    \n    const handleGameStarted = (data) => {\n      console.log('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å:', data);\n      setGameState(prev => ({\n        ...prev,\n        gameStarted: true,\n        characterAssignments: data.characterAssignments\n      }));\n    };\n    \n    const handleCharacterAssigned = (data) => {\n      console.log('–ü–æ–ª—É—á–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂:', data);\n      setGameState(prev => ({\n        ...prev,\n        characters: {\n          ...prev.characters,\n          [socketApi.getSocketId()]: data.character\n        }\n      }));\n    };\n    \n    const handleConnect = () => {\n      console.log('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      setServerStatus('connected');\n      setError('');\n      \n      // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é\n      if (gameState.isHost) {\n        socketApi.createRoom(gameState.playerName);\n      } else {\n        socketApi.joinRoom(gameState.roomCode, gameState.playerName);\n      }\n    };\n    \n    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏\n    socketApi.on('room-updated', handleRoomUpdated);\n    socketApi.on('game-started', handleGameStarted);\n    socketApi.on('character-assigned', handleCharacterAssigned);\n    socketApi.on('connect', handleConnect);\n    \n    // –ï—Å–ª–∏ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ\n    if (socketApi.isConnected()) {\n      handleConnect();\n    }\n    \n    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n    return () => {\n      socketApi.off('room-updated', handleRoomUpdated);\n      socketApi.off('game-started', handleGameStarted);\n      socketApi.off('character-assigned', handleCharacterAssigned);\n      socketApi.off('connect', handleConnect);\n    };\n  }, [gameState.roomCode, gameState.playerName, gameState.isHost]);\n\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ\n  useEffect(() => {\n    if (!gameState.roomCode || !gameState.playerName || serverStatus !== 'connected') return;\n    \n    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:', gameState.roomCode);\n    \n    // Callback –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞\n    const handleRemoteStream = (playerId, stream) => {\n      console.log('–ü–æ–ª—É—á–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç:', playerId, \n        stream ? `–í–∏–¥–µ–æ—Ç—Ä–µ–∫–æ–≤: ${stream.getVideoTracks().length}, –ê—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤: ${stream.getAudioTracks().length}` : '–ù–µ—Ç –ø–æ—Ç–æ–∫–∞');\n      \n      if (stream) {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ –ø–æ—Ç–æ–∫–µ —Ç—Ä–µ–∫–∏ –∏–ª–∏ —ç—Ç–æ canvas-–ø–æ—Ç–æ–∫\n        if (stream.getTracks().length > 0 || stream.isCanvasStream) {\n          setRemoteStreams(prev => ({\n            ...prev,\n            [playerId]: stream\n          }));\n        } else {\n          console.warn(`–ü–æ—Ç–æ–∫ –æ—Ç ${playerId} –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–∫–æ–≤ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è canvas-–ø–æ—Ç–æ–∫–æ–º, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º`);\n        }\n      }\n    };\n    \n    // Callback –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞\n    const handleRemoteStreamRemoved = (playerId) => {\n      console.log('–£–¥–∞–ª–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç:', playerId);\n      setRemoteStreams(prev => {\n        const newStreams = { ...prev };\n        delete newStreams[playerId];\n        return newStreams;\n      });\n    };\n    \n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–æ—Å—Ç—É–ø–∞\n    const initVideoWithRetry = async (attempt = 1) => {\n      try {\n        console.log(`–ü–æ–ø—ã—Ç–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ ${attempt}/3`);\n        const localStream = await videoApi.init(gameState.roomCode, handleRemoteStream, handleRemoteStreamRemoved);\n        \n        console.log('–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:', \n          localStream ? `–í–∏–¥–µ–æ—Ç—Ä–µ–∫–æ–≤: ${localStream.getVideoTracks().length}, –ê—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤: ${localStream.getAudioTracks().length}` : '–ù–µ—Ç –ø–æ—Ç–æ–∫–∞');\n        \n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –≤ –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = localStream;\n        }\n        \n        // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Å–æ–∫–µ—Ç–∞ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞\n        const socketId = socketApi.getSocketId();\n        if (socketId) {\n          setGameState(prev => ({\n            ...prev,\n            playerId: socketId\n          }));\n        }\n        \n        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n        setVideoEnabled(videoApi.isVideoEnabled());\n        setAudioEnabled(videoApi.isAudioEnabled());\n        \n        return true;\n      } catch (error) {\n        console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ (–ø–æ–ø—ã—Ç–∫–∞ ${attempt}/3):`, error);\n        \n        if (attempt < 3) {\n          console.log(`–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É...`);\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          return initVideoWithRetry(attempt + 1);\n        }\n        \n        // –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ —É–¥–∞–ª–∏—Å—å\n        setError(getMediaErrorMessage(error));\n        setVideoEnabled(false);\n        setAudioEnabled(false);\n        \n        // –í—Å—ë —Ä–∞–≤–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ID –∏–≥—Ä–æ–∫–∞\n        const socketId = socketApi.getSocketId();\n        if (socketId) {\n          setGameState(prev => ({\n            ...prev,\n            playerId: socketId\n          }));\n        }\n        \n        return false;\n      }\n    };\n    \n    // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏\n    initVideoWithRetry();\n    \n    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n    return () => {\n      videoApi.stop();\n    };\n  }, [gameState.roomCode, gameState.playerName, serverStatus]);\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã\n  const handleStartGame = () => {\n    if (!gameState.isHost) return;\n    socketApi.startGame(gameState.roomCode);\n  };\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n  const handleAssignCharacter = (targetPlayerId) => {\n    if (!newCharacter.trim()) {\n      setError('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞');\n    return;\n    }\n    \n    socketApi.emit('assign-character', {\n      roomCode: gameState.roomCode,\n      targetPlayerId,\n      character: newCharacter\n    });\n    \n    setNewCharacter('');\n    setEditingCharacter(null);\n  };\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ\n  const toggleVideo = () => {\n    const newState = !videoEnabled;\n    videoApi.toggleVideo(newState);\n    setVideoEnabled(newState);\n  };\n\n  const toggleAudio = () => {\n    const newState = !audioEnabled;\n    videoApi.toggleAudio(newState);\n    setAudioEnabled(newState);\n  };\n\n  // –í—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã\n  const handleLeaveGame = () => {\n    videoApi.stop();\n      navigate('/');\n  };\n\n  return (\n    <div className={styles.gamePage}>\n      {/* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–≥—Ä–µ */}\n      <div className={styles.gameHeader}>\n        <div className={styles.roomInfo}>\n          <h2>–ö–æ–º–Ω–∞—Ç–∞: {gameState.roomCode}</h2>\n          {serverStatus === 'connecting' && <div className={styles.connecting}>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</div>}\n          {serverStatus === 'error' && <div className={styles.error}>{error || '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è'}</div>}\n        </div>\n          <div className={styles.gameControls}>\n          {gameState.isHost && !gameState.gameStarted && (\n            <button className={styles.startButton} onClick={handleStartGame}>\n              –ù–∞—á–∞—Ç—å –∏–≥—Ä—É\n            </button>\n          )}\n          <button className={styles.leaveButton} onClick={handleLeaveGame}>\n            –í—ã–π—Ç–∏\n          </button>\n        </div>\n      </div>\n\n      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–≥—Ä—ã */}\n      <div className={styles.gameContent}>\n        {/* –°–µ—Ç–∫–∞ —Å –≤–∏–¥–µ–æ –∏–≥—Ä–æ–∫–æ–≤ */}\n        <div className={styles.videoGrid}>\n          {/* –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫ */}\n          <div className={`${styles.videoBox} ${styles.localVideo}`}>\n            <PlayerVideo\n              stream={localVideoRef.current?.srcObject || null}\n              playerId={gameState.playerId}\n              playerName={gameState.playerName}\n              character={gameState.characters[gameState.playerId]}\n              isCurrentPlayer={true}\n              isVideoEnabled={videoEnabled}\n              isAudioEnabled={audioEnabled}\n            />\n            <div className={styles.videoControls}>\n              <button \n                className={videoEnabled ? styles.videoOn : styles.videoOff} \n                onClick={toggleVideo}\n                title={videoEnabled ? \"–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É\" : \"–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É\"}\n              >\n                {videoEnabled ? 'üé•' : 'üö´'}\n              </button>\n              <button \n                className={audioEnabled ? styles.audioOn : styles.audioOff} \n                onClick={toggleAudio}\n                title={audioEnabled ? \"–í—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω\" : \"–í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω\"}\n              >\n                {audioEnabled ? 'üîä' : 'üîá'}\n              </button>\n            </div>\n          </div>\n\n          {/* –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ */}\n          {gameState.players\n            .filter(player => player.id !== gameState.playerId)\n            .filter((player, index, self) => \n              // –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ ID\n              index === self.findIndex(p => p.id === player.id)\n            )\n            .map((player) => (\n              <div key={`player-${player.id}`} className={styles.videoBox}>\n                  <PlayerVideo \n                  stream={remoteStreams[player.id]}\n                  playerId={player.id}\n                  playerName={player.name}\n                  character={gameState.characters[player.id]}\n                  isCurrentPlayer={false}\n                  isVideoEnabled={true}\n                  isAudioEnabled={true}\n                />\n                {gameState.gameStarted && gameState.characterAssignments[gameState.playerId] === player.id && (\n                  <div className={styles.assignCharacter}>\n                    {editingCharacter === player.id ? (\n                      <div className={styles.characterForm}>\n                        <input\n                          type=\"text\"\n                          value={newCharacter}\n                          onChange={(e) => setNewCharacter(e.target.value)}\n                          placeholder=\"–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\"\n                        />\n                        <div className={styles.formButtons}>\n                          <button onClick={() => handleAssignCharacter(player.id)}>–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>\n                          <button onClick={() => setEditingCharacter(null)}>–û—Ç–º–µ–Ω–∞</button>\n                        </div>\n                      </div>\n                    ) : (\n                      <button \n                        onClick={() => setEditingCharacter(player.id)}\n                        className={styles.assignButton}\n                      >\n                        –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            ))}\n                </div>\n                \n        {/* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –∏–≥—Ä—ã */}\n        <div className={styles.gameSidebar}>\n          {gameState.gameStarted ? (\n            <>\n              <div className={styles.gameInfo}>\n                <h3>–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!</h3>\n                {gameState.characters[gameState.playerId] ? (\n                  <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂: <strong>???</strong></p>\n                ) : (\n                  <p>–û–∂–∏–¥–∞–π—Ç–µ, –ø–æ–∫–∞ –≤–∞–º –∑–∞–≥–∞–¥–∞—é—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</p>\n                )}\n                  </div>\n                  \n              <div className={styles.hintQuestions}>\n                <h3>–ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:</h3>\n                <ul>\n                      {hintQuestions.map((question, index) => (\n                    <li key={index}>{question}</li>\n                      ))}\n                    </ul>\n                  </div>\n              \n              <div className={styles.notes}>\n                <h3>–í–∞—à–∏ –∑–∞–º–µ—Ç–∫–∏:</h3>\n                <textarea\n                  value={notes}\n                  onChange={(e) => setNotes(e.target.value)}\n                  placeholder=\"–ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ–∏ –¥–æ–≥–∞–¥–∫–∏...\"\n                  className={styles.notesArea}\n                />\n              </div>\n            </>\n          ) : (\n            <div className={styles.waitingRoom}>\n              <h3>–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤</h3>\n              <p>–í –∫–æ–º–Ω–∞—Ç–µ {gameState.players.length} –∏–≥—Ä–æ–∫–æ–≤</p>\n              <ul className={styles.playersList}>\n                {gameState.players.map((player, index) => (\n                  <li key={`player-list-${player.id}-${index}`}>\n                    {player.name} {player.isHost && ' (–•–æ—Å—Ç)'}\n                    {player.id === gameState.playerId && ' (–í—ã)'}\n                  </li>\n                ))}\n              </ul>\n              {gameState.isHost && gameState.players.length >= 2 ? (\n                <p>–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –∏–≥—Ä—É!</p>\n              ) : gameState.isHost ? (\n                <p>–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã</p>\n              ) : (\n                <p>–û–∂–∏–¥–∞–π—Ç–µ, –∫–æ–≥–¥–∞ —Ö–æ—Å—Ç –Ω–∞—á–Ω–µ—Ç –∏–≥—Ä—É</p>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {error && (\n        <div className={styles.errorModal}>\n          <div className={styles.errorContent}>\n            <h3>–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</h3>\n            <p>{error}</p>\n            <div className={styles.errorActions}>\n              <button \n                onClick={() => setError('')}\n                className={styles.continueButton}\n              >\n                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –∫–∞–º–µ—Ä—ã\n              </button>\n            </div>\n          </div>\n      </div>\n      )}\n\n      {/* –°–∫—Ä—ã—Ç—ã–π –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ */}\n      <video\n        ref={localVideoRef}\n        autoPlay\n        playsInline\n        muted\n        style={{ display: 'none' }}\n      />\n    </div>\n  );\n};\n","import React from 'react';\r\nimport { HomePage } from '@/pages/HomePage';\r\nimport { GamePage } from '@/pages/GamePage';\r\n\r\nexport const routeConfig = {\r\n  main: {\r\n    path: '/',\r\n    element: <HomePage />\r\n  },\r\n  game: {\r\n    path: '/game',\r\n    element: <GamePage />\r\n  }\r\n};\r\n","import { Suspense } from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport { routeConfig } from '@/shared/config/routeConfig.jsx';\r\n\r\nexport const AppRouter = () => {\r\n  return (\r\n    <Suspense fallback={<div>Loading...</div>}>\r\n      <Routes>\r\n        {Object.values(routeConfig).map(({ path, element }) => (\r\n          <Route\r\n            key={path}\r\n            path={path}\r\n            element={element}\r\n          />\r\n        ))}\r\n      </Routes>\r\n    </Suspense>\r\n  );\r\n}; ","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './Header.module.css';\r\n\r\nexport const Header = () => {\r\n  return (\r\n    <header className={styles.header}>\r\n      <div className={styles.container}>\r\n        <Link to=\"/\" className={styles.logo}>\r\n          <span className={styles.icon}>üìã</span>\r\n          <span className={styles.text}>Who Am I?</span>\r\n        </Link>\r\n        \r\n        <div className={styles.actions}>\r\n          <button className={styles.connectButton}>Connect</button>\r\n          <Link to=\"/\" className={styles.createButton}>Create</Link>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}; ","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './Footer.module.css';\r\n\r\nexport const Footer = () => {\r\n  return (\r\n    <footer className={styles.footer}>\r\n      <div className={styles.container}>\r\n        <div className={styles.copyright}>\r\n          <p>¬© 2023 Who Am I. All rights reserved.</p>\r\n        </div>\r\n        <div className={styles.links}>\r\n          <Link to=\"/\">Home</Link>\r\n          <Link to=\"/about\">About</Link>\r\n          <Link to=\"/privacy\">Privacy</Link>\r\n        </div>\r\n        <div className={styles.social}>\r\n          <a href=\"https://github.com\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"GitHub\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22\"></path></svg>\r\n          </a>\r\n          <a href=\"https://twitter.com\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Twitter\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z\"></path></svg>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}; ","import { Header } from '../Header'\r\nimport { Footer } from '../Footer'\r\nimport styles from './Layout.module.css'\r\n\r\nexport const Layout = ({ children }) => {\r\n  return (\r\n    <div className={styles.layout}>\r\n      <Header />\r\n      <main className={styles.main}>\r\n        {children}\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  )\r\n} ","import { BrowserRouter as Router } from 'react-router-dom'\r\nimport { AppRouter } from './app/providers/router/AppRouter'\r\nimport { Layout } from './widgets/Layout/Layout'\r\nimport React from 'react'\r\n\r\nfunction App() {\r\n  return (\r\n    <Router basename=\"/GithubPagesCoonfigTest\">\r\n      <Layout>\r\n        <AppRouter />\r\n      </Layout>\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default App ","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n) "],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","reactJsxRuntime_production_min","jsxRuntimeModule","MediasoupApi","roomId","peerId","callback","type","data","resolve","socketApi","response","error","mediasoupApi","SocketApi","serverUrl","available","err","io","reason","attemptNumber","playerId","from","signal","players","offer","answer","candidate","timeout","testSocket","connectionTimeout","playerName","roomCode","enabled","targetPlayerId","character","event","callbacks","index","cb","_a","eventName","targetId","peerConnection","_c","_b","state","HomePage","name","setName","useState","setRoomCode","setError","isLoading","setIsLoading","isConnected","setIsConnected","navigate","useNavigate","useEffect","checkConnection","connected","connectionTimer","handleCreateRoom","handleJoinRoom","jsx","styles","jsxs","arr","size","VideoApi","initiator","initialSignal","options","peer","Peer","videoTrack","stream","canvas","ctx","hue","text","animate","borderWidth","animFrameId","videoTracks","track","audioTracks","id","retryCount","maxRetries","videoApi","PlayerVideo","isCurrentPlayer","isVideoEnabled","isAudioEnabled","muted","videoRef","useRef","hasVideo","setHasVideo","videoError","setVideoError","videoStatus","setVideoStatus","videoElement","handlePlay","handleError","handleLoadedMetadata","handleVideoError","handleVideoPlay","GamePage","location","useLocation","serverStatus","setServerStatus","notes","setNotes","editingCharacter","setEditingCharacter","newCharacter","setNewCharacter","videoEnabled","setVideoEnabled","audioEnabled","setAudioEnabled","localVideoRef","remoteStreams","setRemoteStreams","gameState","setGameState","hintQuestions","getMediaErrorMessage","params","room","isHost","prev","handleRoomUpdated","uniquePlayers","player","self","handleGameStarted","handleCharacterAssigned","handleConnect","handleRemoteStream","handleRemoteStreamRemoved","newStreams","initVideoWithRetry","attempt","localStream","socketId","handleStartGame","handleAssignCharacter","toggleVideo","newState","toggleAudio","handleLeaveGame","Fragment","question","routeConfig","AppRouter","Suspense","Routes","path","element","Route","Header","Link","Footer","Layout","children","App","Router","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0,1,2]}