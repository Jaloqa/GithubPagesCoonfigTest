import{r as m,b as ne,u as J,c as re,R as ce,d as ie,L as I,B as ae,e as le}from"./vendor-CV63PnOw.js";import{l as U}from"./socket-Co6MA4MW.js";import{P as de}from"./webrtc-C8QLckjl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var Q={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue=m,he=Symbol.for("react.element"),me=Symbol.for("react.fragment"),ge=Object.prototype.hasOwnProperty,fe=ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_e={key:!0,ref:!0,__self:!0,__source:!0};function K(i,e,t){var s,n={},r=null,u=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(u=e.ref);for(s in e)ge.call(e,s)&&!_e.hasOwnProperty(s)&&(n[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:he,type:i,key:r,ref:u,props:n,_owner:fe.current}}L.Fragment=me;L.jsx=K;L.jsxs=K;Q.exports=L;var o=Q.exports,q={},G=ne;q.createRoot=G.createRoot,q.hydrateRoot=G.hydrateRoot;const pe="_homePage_1myg8_1",ve="_container_1myg8_25",ke="_title_1myg8_41",ye="_subtitle_1myg8_57",Ce="_connectionStatus_1myg8_71",xe="_errorMessage_1myg8_105",je="_formGroup_1myg8_125",be="_nameInput_1myg8_137",Se="_input_1myg8_145",we="_createButton_1myg8_187",Ne="_joinButton_1myg8_219",Re="_divider_1myg8_251",y={homePage:pe,container:ve,title:ke,subtitle:ye,connectionStatus:Ce,errorMessage:xe,formGroup:je,nameInput:be,input:Se,createButton:we,joinButton:Ne,divider:Re};class Te{constructor(){this.initialized=!1,this.roomId=null,this.onTrackCallbacks=new Map}async init(e){return console.log("MediasoupApi: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞"),this.roomId=e,this.initialized=!0,!0}async getLocalStream(){return console.log("MediasoupApi: –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–æ"),null}async publishStream(){return console.log("MediasoupApi: –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞"),!0}setOnTrackCallback(e,t){this.onTrackCallbacks.set(e,t)}async updateStreamStatus(){return console.log("MediasoupApi: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–µ–¥–∏–∞ –æ—Ç–∫–ª—é—á–µ–Ω–æ"),!0}async request(e,t={}){return new Promise(s=>{try{d.emit(e,t,n=>{if(!n){console.warn(`–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ ${e}`),s({});return}s(n)})}catch(n){console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ ${e}:`,n),s({error:n.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞"})}})}cleanup(){console.log("MediasoupApi: –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤"),this.initialized=!1,this.roomId=null,this.onTrackCallbacks.clear()}}const N=new Te;class Ae{constructor(){this.socket=null,this.socketId=null,this.connected=!1,this.listeners=new Map,this.serverUrl="",this.connectionAttempts=0,this.maxConnectionAttempts=5}init(e=null){if(this.socket&&this.connected)return console.log("–°–æ–∫–µ—Ç —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω"),this.socket;e&&(this.serverUrl=e),console.log("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∫–µ—Ç–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫:",this.serverUrl);try{this.socket&&(console.log("–ó–∞–∫—Ä—ã–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–æ–∫–µ—Ç"),this.socket.disconnect(),this.socket=null),this.socket=U(this.serverUrl,{transports:["polling"],timeout:3e4,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:2e3,reconnectionDelayMax:1e4,autoConnect:!0,path:"/socket.io/",forceNew:!0,multiplex:!1,upgrade:!1,rememberUpgrade:!1,secure:!0,rejectUnauthorized:!1,withCredentials:!0,extraHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization, X-Requested-With"}}),this.socket.on("connect",()=>{console.log("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),this.connected=!0,this.connectionAttempts=0}),this.socket.on("connect_error",t=>{console.error("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:",t),this.connected=!1}),this.socket.on("disconnect",t=>{console.log("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ:",t),this.connected=!1}),this.socket.on("reconnect",t=>{console.log("–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, –ø–æ–ø—ã—Ç–∫–∞:",t),this.connected=!0,this.connectionAttempts=0}),this.socket.on("error",t=>{console.error("–û—à–∏–±–∫–∞ —Å–æ–∫–µ—Ç–∞:",t)}),this.socket.on("room-updated",t=>{console.log("–ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:",t)}),this.socket.on("player-joined-video",({roomId:t,playerId:s})=>{console.log("–ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∏–¥–µ–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç:",s,"–¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:",t),this.socket.emit("player-joined",s)}),this.socket.on("signal",({from:t,signal:s})=>{console.log("–ü–æ–ª—É—á–µ–Ω WebRTC —Å–∏–≥–Ω–∞–ª –æ—Ç:",t),this.trigger("signal",{from:t,signal:s})}),this.socket.on("all-players",t=>{console.log("–ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ:",t),this.trigger("all-players",t)}),this.socket.on("webrtc-offer",async({offer:t,from:s})=>{console.log("–ü–æ–ª—É—á–µ–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ WebRTC –æ—Ç:",s);try{const n=await N.handleOffer(s,t);console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ WebRTC –∫:",s),this.socket.emit("webrtc-answer",{answer:n,to:s})}catch(n){console.error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è WebRTC:",n),this.socket.emit("webrtc-error",{to:s,error:"–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"})}}),this.socket.on("webrtc-answer",async({answer:t,from:s})=>{console.log("–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç WebRTC –æ—Ç:",s);try{await N.handleAnswer(s,t),console.log("–û—Ç–≤–µ—Ç WebRTC —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Ç:",s)}catch(n){console.error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ WebRTC:",n),this.socket.emit("webrtc-error",{to:s,error:"–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"})}}),this.socket.on("webrtc-ice-candidate",async({candidate:t,from:s})=>{console.log("–ü–æ–ª—É—á–µ–Ω ICE –∫–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç:",s);try{await N.handleIceCandidate(s,t),console.log("ICE –∫–∞–Ω–¥–∏–¥–∞—Ç —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Ç:",s)}catch(n){console.error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:",n)}}),this.socket.on("webrtc-error",({error:t,from:s})=>{console.error("–ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ WebRTC –æ—Ç:",s,t)})}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–∫–µ—Ç–∞:",t),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}return this.socket}async checkServerAvailability(){try{if(console.log("–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:",this.serverUrl),this.connected&&this.socket)return console.log("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω"),!0;const e=3e3;try{return new Promise(t=>{const s=U(this.serverUrl,{transports:["websocket","polling"],timeout:e,reconnection:!1,forceNew:!0}),n=setTimeout(()=>{console.warn("–¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"),s.disconnect(),t(!1)},e);s.on("connect",()=>{console.log("–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),clearTimeout(n),s.disconnect(),t(!0)}),s.on("connect_error",r=>{console.warn("–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:",r),clearTimeout(n),s.disconnect(),t(!1)})})}catch(t){return console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:",t),!1}}catch(e){return console.error("–û–±—â–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:",e),!1}}createRoom(e){return!this.connected||!this.socket?(console.warn("–ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),!1):(this.socket.emit("create-room",{playerName:e}),!0)}joinRoom(e,t){return!this.connected||!this.socket?(console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),!1):(this.socket.emit("join-room",{roomCode:e,playerName:t}),!0)}startGame(e){return!this.connected||!this.socket?(console.warn("–ü–æ–ø—ã—Ç–∫–∞ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),!1):(this.socket.emit("start-game",{roomCode:e}),!0)}updateVideoStatus(e,t){if(!this.connected||!this.socket){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–æ, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ");return}console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤–∏–¥–µ–æ: –∫–æ–º–Ω–∞—Ç–∞ ${e}, –≤–∫–ª—é—á–µ–Ω–æ: ${t}`),this.socket.emit("video-status",{roomCode:e,enabled:t})}setCharacter(e,t,s){return!this.connected||!this.socket?(console.warn("–ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),!1):(this.socket.emit("set-character",{roomCode:e,targetPlayerId:t,character:s}),!0)}on(e,t){this.socket||this.init(),this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),this.socket.on(e,t)}off(e,t){if(this.socket)if(t){this.socket.off(e,t);const s=this.listeners.get(e)||[],n=s.indexOf(t);n!==-1&&s.splice(n,1)}else(this.listeners.get(e)||[]).forEach(n=>{this.socket.off(e,n)}),this.listeners.delete(e)}removeAllListeners(){this.socket&&(this.listeners.forEach((e,t)=>{e.forEach(s=>{this.socket.off(t,s)})}),this.listeners.clear())}isConnected(){return this.connected}getSocketId(){var e;return(e=this.socket)==null?void 0:e.id}disconnect(){this.socket&&(N.stopAllConnections(),N.stopLocalStream(),this.socket.disconnect(),this.socket=null,this.connected=!1,this.socketId=null,this.listeners.clear())}leaveRoom(e){!this.connected||!this.socket||this.socket.emit("leave-room",{roomCode:e})}getPlayers(e){return!this.connected||!this.socket?(console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),!1):(this.socket.emit("get-players",{roomCode:e}),!0)}emit(e,t){return!this.connected||!this.socket?(console.warn(`–ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ ${e}, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ`),!1):(this.socket.emit(e,t),!0)}trigger(e,t){if(!this.listeners.has(e))return;(this.listeners.get(e)||[]).forEach(n=>{try{n(t)}catch(r){console.error(`–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–±—ã—Ç–∏—è ${e}:`,r)}})}async initiateWebRTCConnection(e){try{const t=await N.createOffer(e);this.socket.emit("webrtc-offer",{offer:t,to:e})}catch(t){console.error("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:",t)}}onPlayerJoined(e){this.socket.on("player-joined",async t=>{console.log("–ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è:",t);try{await this.initiateWebRTCConnection(t.playerId),console.log("WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ —Å:",t.playerId),e(t)}catch(s){console.error("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:",s)}})}onPlayerLeft(e){this.socket.on("player-left",t=>{console.log("–ò–≥—Ä–æ–∫ –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É:",t),N.closeConnection(t.playerId),console.log("WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ —Å:",t.playerId),e(t)})}sendWebRTCOffer(e,t){if(!this.socket||!this.connected){console.error("–°–æ–∫–µ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω");return}console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è WebRTC –∫:",e),this.socket.emit("webrtc-offer",{to:e,offer:t})}sendWebRTCAnswer(e,t){if(!this.socket||!this.connected){console.error("–°–æ–∫–µ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω");return}console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ WebRTC –∫:",e),this.socket.emit("webrtc-answer",{to:e,answer:t})}sendWebRTCIceCandidate(e,t){if(!this.socket||!this.connected){console.error("–°–æ–∫–µ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω");return}console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∫:",e),this.socket.emit("webrtc-ice-candidate",{to:e,candidate:t})}onWebRTCOffer(e){this.socket.on("webrtc-offer",async({from:t,offer:s})=>{try{const n=await N.createPeerConnection(t);await n.setRemoteDescription(new RTCSessionDescription(s));const r=await n.createAnswer();await n.setLocalDescription(r),this.sendWebRTCAnswer(t,r)}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebRTC –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:",n)}})}onWebRTCAnswer(e){this.socket.on("webrtc-answer",async({from:t,answer:s})=>{try{const n=N.getPeerConnection(t);n&&await n.setRemoteDescription(new RTCSessionDescription(s))}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebRTC –æ—Ç–≤–µ—Ç–∞:",n)}})}onWebRTCIceCandidate(e){this.socket.on("webrtc-ice-candidate",async({from:t,candidate:s})=>{try{const n=N.getPeerConnection(t);n&&await n.addIceCandidate(new RTCIceCandidate(s))}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebRTC ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:",n)}})}offWebRTCOffer(e){this.socket&&this.socket.off("webrtc-offer",e)}offWebRTCAnswer(e){this.socket&&this.socket.off("webrtc-answer",e)}offWebRTCIceCandidate(e){this.socket&&this.socket.off("webrtc-ice-candidate",e)}offPlayerJoined(e){this.socket&&this.socket.off("player-joined",e)}getSocketState(){var e,t,s;return this.socket?{connected:this.socket.connected,connectionState:this.socket.connected?"connected":this.socket.disconnected?"disconnected":"connecting",id:this.socket.id,transportType:((s=(t=(e=this.socket.io)==null?void 0:e.engine)==null?void 0:t.transport)==null?void 0:s.name)||null}:{connected:!1,connectionState:"closed",id:null,transportType:null}}getSocketStateString(){const e=this.getSocketState();return`–°–æ–∫–µ—Ç: ${e.connectionState} (ID: ${e.id||"–Ω–µ—Ç"}, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç: ${e.transportType||"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"})`}logSocketState(){return console.log(this.getSocketStateString()),this.getSocketState()}}const d=new Ae,Ee=()=>{const[i,e]=m.useState(""),[t,s]=m.useState(""),[n,r]=m.useState(""),[u,g]=m.useState(!1),[C,P]=m.useState(!1),b=J();m.useEffect(()=>{d.init();const f=()=>{const _=d.isConnected();P(_),_?r(""):(console.log("–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É..."),r("–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω."))};f();const S=setInterval(f,3e3);return d.on("room-created",_=>{g(!1),console.log("–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞:",_),_.success?b(`/game?name=${encodeURIComponent(i)}&room=${encodeURIComponent(_.roomCode)}&host=true`):r(_.error||"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É")}),d.on("room-joined",_=>{g(!1),console.log("–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ:",_),_.success?b(`/game?name=${encodeURIComponent(i)}&room=${encodeURIComponent(t)}`):r(_.error||"–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ")}),d.on("connect_error",_=>{console.error("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è Socket.IO:",_),r(`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ${_.message}`),g(!1)}),()=>{clearInterval(S),d.off("room-created"),d.off("room-joined"),d.off("connect_error")}},[b,i,t]);const $=()=>{if(!C){r("–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.");return}if(!i.trim()){r("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è");return}r(""),g(!0);try{console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:",i),d.createRoom(i)}catch(f){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã:",f),r(`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ${f.message}`),g(!1)}},R=()=>{if(!C){r("–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.");return}if(!i.trim()){r("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è");return}if(!t.trim()){r("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã");return}r(""),g(!0);try{console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ:",t,i),d.joinRoom(t,i)}catch(f){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∫ –∫–æ–º–Ω–∞—Ç–µ:",f),r(`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ${f.message}`),g(!1)}};return o.jsx("div",{className:y.homePage,children:o.jsxs("div",{className:y.container,children:[o.jsx("h1",{className:y.title,children:"Who Am I?"}),o.jsx("p",{className:y.subtitle,children:"A fun game to play with your friends"}),!C&&o.jsx("div",{className:y.connectionStatus,children:"Connecting to server..."}),n&&o.jsx("div",{className:y.errorMessage,children:n}),o.jsx("div",{className:`${y.formGroup} ${y.nameInput}`,children:o.jsx("input",{type:"text",className:y.input,placeholder:"Enter name",value:i,onChange:f=>e(f.target.value),disabled:u||!C})}),o.jsx("div",{className:y.formGroup,children:o.jsx("button",{className:y.createButton,onClick:$,disabled:u||!C,children:u?"Creating...":"Create room"})}),o.jsx("div",{className:y.divider,children:"or"}),o.jsx("div",{className:y.formGroup,children:o.jsx("input",{type:"text",className:y.input,placeholder:"Room code",value:t,onChange:f=>s(f.target.value.toUpperCase()),disabled:u||!C})}),o.jsx("div",{className:y.formGroup,children:o.jsx("button",{className:y.joinButton,onClick:R,disabled:u||!C,children:u?"Joining...":"Join"})})]})})},Pe="_gamePage_1izas_1",ze="_gameContainer_1izas_23",Be="_header_1izas_37",$e="_title_1izas_49",Oe="_gameControls_1izas_61",Ve="_playerInfo_1izas_77",Ie="_startButton_1izas_87",We="_copyButton_1izas_87",Le="_backButton_1izas_155",Me="_errorActions_1izas_185",qe="_homeButton_1izas_199",De="_errorMessage_1izas_231",Ue="_retryButton_1izas_263",Ge="_loadingMessage_1izas_297",Fe="_spinnerContainer_1izas_329",He="_spinner_1izas_329",Je="_spin_1izas_329",Qe="_lobbyInfo_1izas_365",Ke="_gameArea_1izas_389",Xe="_gameContent_1izas_401",Ye="_gameDescription_1izas_411",Ze="_videoGrid_1izas_425",et="_videoBox_1izas_439",tt="_playerVideoContainer_1izas_459",ot="_videoWrapper_1izas_473",st="_playerVideo_1izas_459",nt="_placeholderVideo_1izas_509",rt="_placeholderContent_1izas_531",ct="_noVideoText_1izas_561",it="_userIcon_1izas_573",at="_playerName_1izas_595",lt="_playerCharacter_1izas_609",dt="_mediaControls_1izas_621",ut="_mutedIcon_1izas_633",ht="_videoDisabled_1izas_649",mt="_noVideoIcon_1izas_675",gt="_localVideo_1izas_687",ft="_videoControls_1izas_697",_t="_videoOn_1izas_713",pt="_videoOff_1izas_713",vt="_audioOn_1izas_713",kt="_audioOff_1izas_713",yt="_noPlayersMessage_1izas_797",Ct="_mediaButton_1izas_843",xt="_mediaButtonActive_1izas_869",jt="_mediaButtonDisabled_1izas_879",bt="_cameraOffOverlay_1izas_897",St="_cameraOffIcon_1izas_923",wt="_lobby_1izas_365",Nt="_streamError_1izas_961",Rt="_streamErrorIcon_1izas_993",Tt="_streamErrorText_1izas_1001",At="_altButton_1izas_1011",Et="_videoPlaceholder_1izas_1041",Pt="_errorModal_1izas_1103",zt="_errorContent_1izas_1129",Bt="_continueButton_1izas_1181",$t="_formButtons_1izas_1211",Ot="_assignButton_1izas_1277",Vt="_characterForm_1izas_1309",It="_videoStatus_1izas_1339",Wt="_videoStatusConnecting_1izas_1373",Lt="_videoStatusError_1izas_1381",Mt="_videoStatusActive_1izas_1389",qt="_streamIcon_1izas_1397",c={gamePage:Pe,gameContainer:ze,header:Be,title:$e,gameControls:Oe,playerInfo:Ve,startButton:Ie,copyButton:We,backButton:Le,errorActions:Me,homeButton:qe,errorMessage:De,retryButton:Ue,loadingMessage:Ge,spinnerContainer:Fe,spinner:He,spin:Je,lobbyInfo:Qe,gameArea:Ke,gameContent:Xe,gameDescription:Ye,videoGrid:Ze,videoBox:et,playerVideoContainer:tt,videoWrapper:ot,playerVideo:st,placeholderVideo:nt,placeholderContent:rt,noVideoText:ct,userIcon:it,playerName:at,playerCharacter:lt,mediaControls:dt,mutedIcon:ut,videoDisabled:ht,noVideoIcon:mt,localVideo:gt,videoControls:ft,videoOn:_t,videoOff:pt,audioOn:vt,audioOff:kt,noPlayersMessage:yt,mediaButton:Ct,mediaButtonActive:xt,mediaButtonDisabled:jt,cameraOffOverlay:bt,cameraOffIcon:St,lobby:wt,streamError:Nt,streamErrorIcon:Rt,streamErrorText:Tt,altButton:At,videoPlaceholder:Et,errorModal:Pt,errorContent:zt,continueButton:Bt,formButtons:$t,assignButton:Ot,characterForm:Vt,videoStatus:It,videoStatusConnecting:Wt,videoStatusError:Lt,videoStatusActive:Mt,streamIcon:qt};typeof window>"u"&&(window.global=window);typeof process>"u"&&(window.process=window.process||{},window.process.browser=!0,window.process.env=window.process.env||{});typeof Buffer>"u"&&(window.Buffer=window.Buffer||{from:i=>new Uint8Array(i),alloc:i=>new Uint8Array(i),allocUnsafe:i=>new Uint8Array(i),isBuffer:()=>!1});class Dt{constructor(){this.peers={},this.connectedPlayers=new Set,this.localStream=null,this.onRemoteStream=null,this.onRemoteStreamRemoved=null,this.myPlayerId=null,this.roomId=null,this.initialized=!1,this.animationFrames=[],this.canvasStreams={}}createPeer(e,t,s=null){if(console.log(`–°–æ–∑–¥–∞–Ω–∏–µ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å ${e} (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä: ${t})`),this.peers[e]){console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å ${e} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`);return}const n={initiator:t,trickle:!1,stream:this.localStream,config:{iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun5.l.google.com:19302"},{urls:"stun:stun6.l.google.com:19302"},{urls:"stun:stun7.l.google.com:19302"},{urls:"stun:stun8.l.google.com:19302"},{urls:"stun:stun9.l.google.com:19302"},{urls:"stun:stun10.l.google.com:19302"},{urls:"stun:stun11.l.google.com:19302"},{urls:"stun:stun12.l.google.com:19302"},{urls:"stun:stun13.l.google.com:19302"},{urls:"stun:stun14.l.google.com:19302"},{urls:"stun:stun15.l.google.com:19302"},{urls:"stun:stun16.l.google.com:19302"},{urls:"stun:stun17.l.google.com:19302"},{urls:"stun:stun18.l.google.com:19302"},{urls:"stun:stun19.l.google.com:19302"},{urls:"stun:stun20.l.google.com:19302"}],iceTransportPolicy:"all",iceCandidatePoolSize:10}};try{const r=new de(n);return r.on("error",u=>{console.error(`–û—à–∏–±–∫–∞ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å ${e}:`,u),this.handlePeerError(e,u)}),r.on("connect",()=>{if(console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å ${e}`),this.connectedPlayers.add(e),this.localStream){const u=this.localStream.getVideoTracks()[0];u&&console.log(`–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –¥–ª—è ${e}:`,{enabled:u.enabled,readyState:u.readyState,muted:u.muted})}}),r.on("close",()=>{console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ —Å ${e}`),this.handlePeerClose(e)}),r.on("stream",u=>{if(console.log(`–ü–æ–ª—É—á–µ–Ω –ø–æ—Ç–æ–∫ –æ—Ç ${e}`),this.onRemoteStream){u.playerId=e;const g=u.getVideoTracks()[0];g&&console.log(`–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –æ—Ç ${e}:`,{enabled:g.enabled,readyState:g.readyState,muted:g.muted}),this.onRemoteStream(e,u)}}),r.on("signal",u=>{console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –∫ ${e}`),d.emit("signal",{to:e,signal:u})}),!t&&s&&r.signal(s),this.peers[e]=r,r}catch(r){console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∏—Ä–∞ –¥–ª—è ${e}:`,r),this.handlePeerError(e,r)}}handlePeerError(e,t){this.peers[e]&&(this.peers[e].destroy(),delete this.peers[e]),this.connectedPlayers.delete(e),this.onRemoteStreamRemoved&&this.onRemoteStreamRemoved(e)}handlePeerClose(e){delete this.peers[e],this.connectedPlayers.delete(e),this.onRemoteStreamRemoved&&this.onRemoteStreamRemoved(e)}async createCanvasStream(){const e=document.createElement("canvas");e.width=640,e.height=480;const t=e.getContext("2d");let s=0;const n="–ù–µ—Ç –∫–∞–º–µ—Ä—ã",r=()=>{t.fillStyle="#1a1625",t.fillRect(0,0,e.width,e.height);const g=4;t.strokeStyle=`hsl(${s}, 70%, 60%)`,t.lineWidth=g,t.strokeRect(g/2,g/2,e.width-g,e.height-g),s=(s+1)%360,t.font="48px Arial",t.fillStyle="#ffffff",t.textAlign="center",t.textBaseline="middle",t.fillText(n,e.width/2,e.height/2),t.font="36px Arial",t.fillText("üé•",e.width/2,e.height/2-60);const C=requestAnimationFrame(r);this.animationFrames.push(C)};r();const u=e.captureStream(30);return u.isCanvasStream=!0,u}setupSocketListeners(e){d.off("signal"),d.off("player-joined"),d.off("player-left"),d.off("all-players"),d.emit("join-room",{roomId:e}),d.on("all-players",t=>{console.log("–ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ:",t),t.forEach(s=>{s!==this.myPlayerId&&!this.connectedPlayers.has(s)&&(console.log(`–°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –∏–≥—Ä–æ–∫–æ–º ${s}`),this.createPeer(s,!0))})}),d.on("player-joined",t=>{console.log("–ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è:",t),t!==this.myPlayerId&&!this.connectedPlayers.has(t)&&(console.log(`–°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –∏–≥—Ä–æ–∫–æ–º ${t}`),this.createPeer(t,!1))}),d.on("player-left",t=>{console.log("–ò–≥—Ä–æ–∫ –≤—ã—à–µ–ª:",t),this.connectedPlayers.delete(t),this.peers[t]&&(this.peers[t].destroy(),delete this.peers[t]),this.onRemoteStreamRemoved&&this.onRemoteStreamRemoved(t)}),d.on("signal",({from:t,signal:s})=>{if(console.log("–ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –æ—Ç:",t),this.peers[t])if(this.peers[t].connected)try{console.log(`–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å ${t}`),this.peers[t].signal(s)}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–∏–≥–Ω–∞–ª–∞:",n),this.handlePeerError(t,n),this.createPeer(t,!1,s)}else console.warn("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å",t,"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–æ. –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ."),this.createPeer(t,!1,s);else console.warn("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å",t,"–Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ."),this.createPeer(t,!1,s)})}toggleVideo(e){if(this.localStream){const t=this.localStream.getVideoTracks();if(t.length>0)return t.forEach(s=>{s.enabled=e}),!0}return!1}toggleAudio(e){if(this.localStream){const t=this.localStream.getAudioTracks();if(t.length>0)return t.forEach(s=>{s.enabled=e}),!0}return!1}isVideoEnabled(){return this.localStream&&this.localStream.getVideoTracks().length>0}isAudioEnabled(){return this.localStream&&this.localStream.getAudioTracks().length>0}stop(){this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),Object.values(this.peers).forEach(t=>{t&&typeof t.destroy=="function"&&t.destroy()}),this.peers={},d.off("signal"),d.off("player-joined"),d.off("player-left"),d.off("all-players"),this.animationFrames.forEach(t=>{cancelAnimationFrame(t)}),this.animationFrames=[],document.querySelectorAll('canvas[id^="canvas-"]').forEach(t=>{t.remove()}),this.canvasStreams={},this.initialized=!1,this.connectedPlayers.clear(),this.roomId=null}getStreamInfo(e){return e?{isCanvas:e.isCanvasStream||!1,canvasId:e.canvasId||null,videoTracks:e.getVideoTracks().length,audioTracks:e.getAudioTracks().length}:null}async init(e){console.log("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Video API —Å WebRTC –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:",e),this.roomId=e,this.localStream&&(this.localStream.getTracks().forEach(n=>n.stop()),this.localStream=null);let t=0;const s=3;for(;t<s;)try{console.log(`–ü–æ–ø—ã—Ç–∫–∞ ${t+1}/${s} –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å –∫–∞–º–µ—Ä—ã...`);const n=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:30}},audio:!1});console.log("–ú–µ–¥–∏–∞–ø–æ—Ç–æ–∫ –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ: –≤–∏–¥–µ–æ —Ç—Ä–µ–∫–æ–≤:",n.getVideoTracks().length,", –∞—É–¥–∏–æ —Ç—Ä–µ–∫–æ–≤:",n.getAudioTracks().length);const r=n.getVideoTracks()[0];console.log("–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞:",r.getSettings()),this.localStream=n;break}catch(n){if(console.error(`–ü–æ–ø—ã—Ç–∫–∞ ${t+1}/${s} –Ω–µ —É–¥–∞–ª–∞—Å—å:`,n),n.name==="NotReadableError"&&t<s-1){console.log("–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–æ, –∂–¥–µ–º 2 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π..."),await new Promise(r=>setTimeout(r,2e3)),t++;continue}console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å –∫–∞–º–µ—Ä—ã:",n),console.log("–°–æ–∑–¥–∞–µ–º –ø–æ—Ç–æ–∫ –∏–∑ –∫–∞–Ω–≤–∞—Å–∞ –≤–º–µ—Å—Ç–æ –∫–∞–º–µ—Ä—ã"),this.localStream=await this.createCanvasStream();break}return this.initialized=!0,this.localStream}}const B=new Dt,F=({stream:i,playerId:e,playerName:t,character:s,isCurrentPlayer:n,isVideoEnabled:r=!0,isAudioEnabled:u=!0,muted:g})=>{const C=m.useRef(null),[P,b]=m.useState(!1),[$,R]=m.useState(null),[f,S]=m.useState("connecting");m.useEffect(()=>{if(console.log("PlayerVideo: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –¥–ª—è",e,i?`–í–∏–¥–µ–æ—Ç—Ä–µ–∫–æ–≤: ${i.getVideoTracks().length}, –ê—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤: ${i.getAudioTracks().length}`:"–Ω–µ—Ç –ø–æ—Ç–æ–∫–∞"),!i||!C.current){console.log("–ù–µ—Ç –ø–æ—Ç–æ–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞",e,"–∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ—ç–ª–µ–º–µ–Ω—Ç");return}const p=C.current,T=i.getVideoTracks()[0];T&&console.log("–í–∏–¥–µ–æ—Ç—Ä–µ–∫ –¥–ª—è",e,":",{enabled:T.enabled,active:T.active,type:T.kind,readyState:T.readyState,muted:T.muted}),p.srcObject&&(console.log("–û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–∏–¥–µ–æ –¥–ª—è",e),p.srcObject=null),p.srcObject=i;const a=()=>{console.log("–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –¥–ª—è",e)},A=z=>{console.error("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ:",z),setTimeout(()=>{p.paused&&(console.log("–ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è",e),p.play().catch(M=>{console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:",M)}))},1e3)},W=()=>{console.log("–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–ª—è",e),p.play().catch(z=>{console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:",z)})};return p.addEventListener("play",a),p.addEventListener("error",A),p.addEventListener("loadedmetadata",W),()=>{console.log("–û—á–∏—Å—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ PlayerVideo –¥–ª—è",e),p.removeEventListener("play",a),p.removeEventListener("error",A),p.removeEventListener("loadedmetadata",W),p.srcObject&&(p.srcObject.getTracks().forEach(z=>z.stop()),p.srcObject=null)}},[i,e]);const _=p=>{console.error(`–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ –¥–ª—è ${e}:`,p),R(p.message||"–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ"),b(!1),S("error")},O=()=>{console.log(`–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –¥–ª—è ${e}`),S("active"),b(!0)};return i&&(P||i.getVideoTracks().length>0||i.isCanvasStream),o.jsxs("div",{className:c.playerVideoContainer,children:[i?o.jsxs("div",{className:c.videoWrapper,children:[o.jsx("video",{ref:C,className:c.playerVideo,autoPlay:!0,playsInline:!0,muted:g,onError:_,onPlay:O}),o.jsx("div",{className:`${c.videoStatus} ${c[`videoStatus${f.charAt(0).toUpperCase()+f.slice(1)}`]}`,children:o.jsxs("span",{className:c.streamIcon,children:[f==="connecting"&&"‚åõ",f==="active"&&"‚úì",f==="error"&&"‚úó"]})})]}):o.jsx("div",{className:c.placeholderVideo,children:o.jsxs("div",{className:c.placeholderContent,children:[o.jsx("span",{role:"img","aria-label":"user",children:"üë§"}),o.jsx("div",{className:c.noVideoText,children:$?"–û—à–∏–±–∫–∞ –≤–∏–¥–µ–æ":"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."}),o.jsx("div",{className:c.spinnerContainer,children:o.jsx("div",{className:c.spinner})})]})}),!r&&i&&o.jsx("div",{className:c.videoDisabled,children:o.jsx("span",{className:c.noVideoIcon,children:"üé•"})}),o.jsxs("div",{className:c.playerInfo,children:[o.jsxs("div",{className:c.playerName,children:[t||`–ò–≥—Ä–æ–∫ ${(e==null?void 0:e.substring(0,4))||"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π"}`," ",n&&" (–í—ã)"]}),s&&o.jsxs("div",{className:c.playerCharacter,children:["–ü–µ—Ä—Å–æ–Ω–∞–∂: ",n?"???":s]}),!u&&o.jsx("div",{className:c.mediaControls,children:o.jsx("span",{className:c.mutedIcon,children:"üîá"})})]})]})},Ut=()=>{var D;const i=re(),e=J(),[t,s]=m.useState(""),[n,r]=m.useState("connecting"),[u,g]=m.useState(""),[C,P]=m.useState(null),[b,$]=m.useState(""),[R,f]=m.useState(!0),[S,_]=m.useState(!0),O=m.useRef(null),[p,T]=m.useState({}),[a,A]=m.useState({roomCode:"",players:[],isHost:!1,playerName:"",gameStarted:!1,playerId:"",characterAssignments:{},characters:{}}),W=["–Ø —á–µ–ª–æ–≤–µ–∫?","–Ø –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂?","–Ø –∂–∏–≤—É –≤ –Ω–∞—à–µ –≤—Ä–µ–º—è?","–Ø –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å?","–Ø —Å–ø–æ—Ä—Ç—Å–º–µ–Ω?","–Ø –∞–∫—Ç–µ—Ä/–∞–∫—Ç—Ä–∏—Å–∞?","–Ø –º—É–∑—ã–∫–∞–Ω—Ç?","–Ø –ø–æ–ª–∏—Ç–∏–∫?","–Ø —Å—Ç–∞—Ä—à–µ 50 –ª–µ—Ç?","–Ø –º—É–∂—á–∏–Ω–∞?","–Ø –∂–µ–Ω—â–∏–Ω–∞?"],z=l=>{if(!l)return"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∫–∞–º–µ—Ä–µ";switch(l.name){case"NotAllowedError":return"–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–ø—Ä–µ—â–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.";case"NotFoundError":return"–ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.";case"NotReadableError":return"–ö–∞–º–µ—Ä–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∫–∞–º–µ—Ä—É, –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.";case"OverconstrainedError":return"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –º–µ–Ω—å—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.";case"AbortError":return"–û–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.";case"SecurityError":return"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞.";case"TypeError":return"–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ.";default:return`–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∫–∞–º–µ—Ä–µ: ${l.message||l.name}`}};m.useEffect(()=>{const l=new URLSearchParams(i.search),x=l.get("name"),w=l.get("room"),v=l.get("host")==="true";if(!x||!w){e("/");return}A(h=>({...h,playerName:x,roomCode:w,isHost:v}))},[i.search,e]),m.useEffect(()=>{if(!a.roomCode||!a.playerName)return;console.log("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–º–Ω–∞—Ç–æ–π:",a.roomCode),r("connecting"),d.init();const l=h=>{console.log("–ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:",h);const k=h.players.filter((j,te,oe)=>te===oe.findIndex(se=>se.id===j.id));A(j=>({...j,players:k,gameStarted:h.gameStarted||j.gameStarted,characterAssignments:h.characterAssignments||j.characterAssignments,characters:h.characters||j.characters}))},x=h=>{console.log("–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å:",h),A(k=>({...k,gameStarted:!0,characterAssignments:h.characterAssignments}))},w=h=>{console.log("–ü–æ–ª—É—á–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂:",h),A(k=>({...k,characters:{...k.characters,[d.getSocketId()]:h.character}}))},v=()=>{console.log("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"),r("connected"),s(""),a.isHost?d.createRoom(a.playerName):d.joinRoom(a.roomCode,a.playerName)};return d.on("room-updated",l),d.on("game-started",x),d.on("character-assigned",w),d.on("connect",v),d.isConnected()&&v(),()=>{d.off("room-updated",l),d.off("game-started",x),d.off("character-assigned",w),d.off("connect",v)}},[a.roomCode,a.playerName,a.isHost]),m.useEffect(()=>{if(!a.roomCode||!a.playerName||n!=="connected")return;console.log("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:",a.roomCode);const l=(v,h)=>{console.log("–ü–æ–ª—É—á–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç:",v,h?`–í–∏–¥–µ–æ—Ç—Ä–µ–∫–æ–≤: ${h.getVideoTracks().length}, –ê—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤: ${h.getAudioTracks().length}`:"–ù–µ—Ç –ø–æ—Ç–æ–∫–∞"),h&&(h.getTracks().length>0||h.isCanvasStream?T(k=>({...k,[v]:h})):console.warn(`–ü–æ—Ç–æ–∫ –æ—Ç ${v} –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–∫–æ–≤ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è canvas-–ø–æ—Ç–æ–∫–æ–º, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º`))},x=v=>{console.log("–£–¥–∞–ª–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç:",v),T(h=>{const k={...h};return delete k[v],k})},w=async(v=1)=>{try{console.log(`–ü–æ–ø—ã—Ç–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ ${v}/3`);const h=await B.init(a.roomCode,l,x);console.log("–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:",h?`–í–∏–¥–µ–æ—Ç—Ä–µ–∫–æ–≤: ${h.getVideoTracks().length}, –ê—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤: ${h.getAudioTracks().length}`:"–ù–µ—Ç –ø–æ—Ç–æ–∫–∞"),O.current&&(O.current.srcObject=h);const k=d.getSocketId();return k&&A(j=>({...j,playerId:k})),f(B.isVideoEnabled()),_(B.isAudioEnabled()),!0}catch(h){if(console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ (–ø–æ–ø—ã—Ç–∫–∞ ${v}/3):`,h),v<3)return console.log("–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É..."),await new Promise(j=>setTimeout(j,1e3)),w(v+1);s(z(h)),f(!1),_(!1);const k=d.getSocketId();return k&&A(j=>({...j,playerId:k})),!1}};return w(),()=>{B.stop()}},[a.roomCode,a.playerName,n]);const M=()=>{a.isHost&&d.startGame(a.roomCode)},X=l=>{if(!b.trim()){s("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞");return}d.emit("assign-character",{roomCode:a.roomCode,targetPlayerId:l,character:b}),$(""),P(null)},Y=()=>{const l=!R;B.toggleVideo(l),f(l)},Z=()=>{const l=!S;B.toggleAudio(l),_(l)},ee=()=>{B.stop(),e("/")};return o.jsxs("div",{className:c.gamePage,children:[o.jsxs("div",{className:c.gameHeader,children:[o.jsxs("div",{className:c.roomInfo,children:[o.jsxs("h2",{children:["–ö–æ–º–Ω–∞—Ç–∞: ",a.roomCode]}),n==="connecting"&&o.jsx("div",{className:c.connecting,children:"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."}),n==="error"&&o.jsx("div",{className:c.error,children:t||"–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"})]}),o.jsxs("div",{className:c.gameControls,children:[a.isHost&&!a.gameStarted&&o.jsx("button",{className:c.startButton,onClick:M,children:"–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"}),o.jsx("button",{className:c.leaveButton,onClick:ee,children:"–í—ã–π—Ç–∏"})]})]}),o.jsxs("div",{className:c.gameContent,children:[o.jsxs("div",{className:c.videoGrid,children:[o.jsxs("div",{className:`${c.videoBox} ${c.localVideo}`,children:[o.jsx(F,{stream:((D=O.current)==null?void 0:D.srcObject)||null,playerId:a.playerId,playerName:a.playerName,character:a.characters[a.playerId],isCurrentPlayer:!0,isVideoEnabled:R,isAudioEnabled:S}),o.jsxs("div",{className:c.videoControls,children:[o.jsx("button",{className:R?c.videoOn:c.videoOff,onClick:Y,title:R?"–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É":"–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É",children:R?"üé•":"üö´"}),o.jsx("button",{className:S?c.audioOn:c.audioOff,onClick:Z,title:S?"–í—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω":"–í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω",children:S?"üîä":"üîá"})]})]}),a.players.filter(l=>l.id!==a.playerId).filter((l,x,w)=>x===w.findIndex(v=>v.id===l.id)).map(l=>o.jsxs("div",{className:c.videoBox,children:[o.jsx(F,{stream:p[l.id],playerId:l.id,playerName:l.name,character:a.characters[l.id],isCurrentPlayer:!1,isVideoEnabled:!0,isAudioEnabled:!0}),a.gameStarted&&a.characterAssignments[a.playerId]===l.id&&o.jsx("div",{className:c.assignCharacter,children:C===l.id?o.jsxs("div",{className:c.characterForm,children:[o.jsx("input",{type:"text",value:b,onChange:x=>$(x.target.value),placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"}),o.jsxs("div",{className:c.formButtons,children:[o.jsx("button",{onClick:()=>X(l.id),children:"–ù–∞–∑–Ω–∞—á–∏—Ç—å"}),o.jsx("button",{onClick:()=>P(null),children:"–û—Ç–º–µ–Ω–∞"})]})]}):o.jsx("button",{onClick:()=>P(l.id),className:c.assignButton,children:"–ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"})})]},`player-${l.id}`))]}),o.jsx("div",{className:c.gameSidebar,children:a.gameStarted?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:c.gameInfo,children:[o.jsx("h3",{children:"–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!"}),a.characters[a.playerId]?o.jsxs("p",{children:["–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂: ",o.jsx("strong",{children:"???"})]}):o.jsx("p",{children:"–û–∂–∏–¥–∞–π—Ç–µ, –ø–æ–∫–∞ –≤–∞–º –∑–∞–≥–∞–¥–∞—é—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"})]}),o.jsxs("div",{className:c.hintQuestions,children:[o.jsx("h3",{children:"–ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:"}),o.jsx("ul",{children:W.map((l,x)=>o.jsx("li",{children:l},x))})]}),o.jsxs("div",{className:c.notes,children:[o.jsx("h3",{children:"–í–∞—à–∏ –∑–∞–º–µ—Ç–∫–∏:"}),o.jsx("textarea",{value:u,onChange:l=>g(l.target.value),placeholder:"–ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ–∏ –¥–æ–≥–∞–¥–∫–∏...",className:c.notesArea})]})]}):o.jsxs("div",{className:c.waitingRoom,children:[o.jsx("h3",{children:"–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤"}),o.jsxs("p",{children:["–í –∫–æ–º–Ω–∞—Ç–µ ",a.players.length," –∏–≥—Ä–æ–∫–æ–≤"]}),o.jsx("ul",{className:c.playersList,children:a.players.map((l,x)=>o.jsxs("li",{children:[l.name," ",l.isHost&&" (–•–æ—Å—Ç)",l.id===a.playerId&&" (–í—ã)"]},`player-list-${l.id}-${x}`))}),a.isHost&&a.players.length>=2?o.jsx("p",{children:"–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –∏–≥—Ä—É!"}):a.isHost?o.jsx("p",{children:"–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã"}):o.jsx("p",{children:"–û–∂–∏–¥–∞–π—Ç–µ, –∫–æ–≥–¥–∞ —Ö–æ—Å—Ç –Ω–∞—á–Ω–µ—Ç –∏–≥—Ä—É"})]})})]}),t&&o.jsx("div",{className:c.errorModal,children:o.jsxs("div",{className:c.errorContent,children:[o.jsx("h3",{children:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"}),o.jsx("p",{children:t}),o.jsx("div",{className:c.errorActions,children:o.jsx("button",{onClick:()=>s(""),className:c.continueButton,children:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –∫–∞–º–µ—Ä—ã"})})]})}),o.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}})]})},Gt={main:{path:"/",element:o.jsx(Ee,{})},game:{path:"/game",element:o.jsx(Ut,{})}},Ft=()=>o.jsx(m.Suspense,{fallback:o.jsx("div",{children:"Loading..."}),children:o.jsx(ce,{children:Object.values(Gt).map(({path:i,element:e})=>o.jsx(ie,{path:i,element:e},i))})}),Ht="_header_ksqj1_1",Jt="_container_ksqj1_15",Qt="_logo_ksqj1_29",Kt="_icon_ksqj1_45",Xt="_text_ksqj1_53",Yt="_actions_ksqj1_61",Zt="_connectButton_ksqj1_71",eo="_createButton_ksqj1_99",E={header:Ht,container:Jt,logo:Qt,icon:Kt,text:Xt,actions:Yt,connectButton:Zt,createButton:eo},to=()=>o.jsx("header",{className:E.header,children:o.jsxs("div",{className:E.container,children:[o.jsxs(I,{to:"/",className:E.logo,children:[o.jsx("span",{className:E.icon,children:"üìã"}),o.jsx("span",{className:E.text,children:"Who Am I?"})]}),o.jsxs("div",{className:E.actions,children:[o.jsx("button",{className:E.connectButton,children:"Connect"}),o.jsx(I,{to:"/",className:E.createButton,children:"Create"})]})]})}),oo="_footer_4qbq9_1",so="_container_4qbq9_15",no="_copyright_4qbq9_35",ro="_links_4qbq9_47",co="_social_4qbq9_79",V={footer:oo,container:so,copyright:no,links:ro,social:co},io=()=>o.jsx("footer",{className:V.footer,children:o.jsxs("div",{className:V.container,children:[o.jsx("div",{className:V.copyright,children:o.jsx("p",{children:"¬© 2023 Who Am I. All rights reserved."})}),o.jsxs("div",{className:V.links,children:[o.jsx(I,{to:"/",children:"Home"}),o.jsx(I,{to:"/about",children:"About"}),o.jsx(I,{to:"/privacy",children:"Privacy"})]}),o.jsxs("div",{className:V.social,children:[o.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})})}),o.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})})})]})]})}),ao="_layout_kkmdn_1",lo="_main_kkmdn_19",H={layout:ao,main:lo},uo=({children:i})=>o.jsxs("div",{className:H.layout,children:[o.jsx(to,{}),o.jsx("main",{className:H.main,children:i}),o.jsx(io,{})]});function ho(){return o.jsx(ae,{basename:"/GithubPagesCoonfigTest",children:o.jsx(uo,{children:o.jsx(Ft,{})})})}q.createRoot(document.getElementById("root")).render(o.jsx(le.StrictMode,{children:o.jsx(ho,{})}));
//# sourceMappingURL=index-DhdJSByQ.js.map
